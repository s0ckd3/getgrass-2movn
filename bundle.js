var tf=Object.create;var Ds=Object.defineProperty;var rf=Object.getOwnPropertyDescriptor;var nf=Object.getOwnPropertyNames;var sf=Object.getPrototypeOf,of=Object.prototype.hasOwnProperty;var dr=(r,e)=>()=>(r&&(e=r(r=0)),e);var M=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),af=(r,e)=>{for(var n in e)Ds(r,n,{get:e[n],enumerable:!0})},lf=(r,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nf(e))!of.call(r,i)&&i!==n&&Ds(r,i,{get:()=>e[i],enumerable:!(o=rf(e,i))||o.enumerable});return r};var $=(r,e,n)=>(n=r!=null?tf(sf(r)):{},lf(e||!r||!r.__esModule?Ds(n,"default",{value:r,enumerable:!0}):n,r));var Yi=M((cn,Gi)=>{(function(r,e){typeof cn=="object"&&typeof Gi<"u"?e(cn):typeof define=="function"&&define.amd?define(["exports"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.WebStreamsPolyfill={}))})(cn,function(r){"use strict";function e(){}function n(t){return typeof t=="object"&&t!==null||typeof t=="function"}let o=e;function i(t,s){try{Object.defineProperty(t,"name",{value:s,configurable:!0})}catch{}}let l=Promise,f=Promise.prototype.then,p=Promise.reject.bind(l);function m(t){return new l(t)}function c(t){return m(s=>s(t))}function d(t){return p(t)}function b(t,s,a){return f.call(t,s,a)}function S(t,s,a){b(b(t,s,a),void 0,o)}function R(t,s){S(t,s)}function g(t,s){S(t,void 0,s)}function w(t,s,a){return b(t,s,a)}function C(t){b(t,void 0,o)}let v=t=>{if(typeof queueMicrotask=="function")v=queueMicrotask;else{let s=c(void 0);v=a=>b(s,a)}return v(t)};function A(t,s,a){if(typeof t!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,s,a)}function F(t,s,a){try{return c(A(t,s,a))}catch(u){return d(u)}}let k=16384;class B{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(s){let a=this._back,u=a;a._elements.length===k-1&&(u={_elements:[],_next:void 0}),a._elements.push(s),u!==a&&(this._back=u,a._next=u),++this._size}shift(){let s=this._front,a=s,u=this._cursor,h=u+1,y=s._elements,_=y[u];return h===k&&(a=s._next,h=0),--this._size,this._cursor=h,s!==a&&(this._front=a),y[u]=void 0,_}forEach(s){let a=this._cursor,u=this._front,h=u._elements;for(;(a!==h.length||u._next!==void 0)&&!(a===h.length&&(u=u._next,h=u._elements,a=0,h.length===0));)s(h[a]),++a}peek(){let s=this._front,a=this._cursor;return s._elements[a]}}let I=Symbol("[[AbortSteps]]"),j=Symbol("[[ErrorSteps]]"),me=Symbol("[[CancelSteps]]"),xe=Symbol("[[PullSteps]]"),tr=Symbol("[[ReleaseSteps]]");function Oo(t,s){t._ownerReadableStream=s,s._reader=t,s._state==="readable"?Jn(t):s._state==="closed"?fu(t):Ao(t,s._storedError)}function Qn(t,s){let a=t._ownerReadableStream;return _e(a,s)}function ke(t){let s=t._ownerReadableStream;s._state==="readable"?Zn(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):du(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),s._readableStreamController[tr](),s._reader=void 0,t._ownerReadableStream=void 0}function Lr(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function Jn(t){t._closedPromise=m((s,a)=>{t._closedPromise_resolve=s,t._closedPromise_reject=a})}function Ao(t,s){Jn(t),Zn(t,s)}function fu(t){Jn(t),Bo(t)}function Zn(t,s){t._closedPromise_reject!==void 0&&(C(t._closedPromise),t._closedPromise_reject(s),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}function du(t,s){Ao(t,s)}function Bo(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}let Lo=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},hu=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function pu(t){return typeof t=="object"||typeof t=="function"}function Ee(t,s){if(t!==void 0&&!pu(t))throw new TypeError(`${s} is not an object.`)}function ae(t,s){if(typeof t!="function")throw new TypeError(`${s} is not a function.`)}function mu(t){return typeof t=="object"&&t!==null||typeof t=="function"}function Do(t,s){if(!mu(t))throw new TypeError(`${s} is not an object.`)}function Oe(t,s,a){if(t===void 0)throw new TypeError(`Parameter ${s} is required in '${a}'.`)}function Xn(t,s,a){if(t===void 0)throw new TypeError(`${s} is required in '${a}'.`)}function es(t){return Number(t)}function Io(t){return t===0?0:t}function yu(t){return Io(hu(t))}function ts(t,s){let u=Number.MAX_SAFE_INTEGER,h=Number(t);if(h=Io(h),!Lo(h))throw new TypeError(`${s} is not a finite number`);if(h=yu(h),h<0||h>u)throw new TypeError(`${s} is outside the accepted range of 0 to ${u}, inclusive`);return!Lo(h)||h===0?0:h}function rs(t,s){if(!Je(t))throw new TypeError(`${s} is not a ReadableStream.`)}function Pt(t){return new He(t)}function Fo(t,s){t._reader._readRequests.push(s)}function ns(t,s,a){let h=t._reader._readRequests.shift();a?h._closeSteps():h._chunkSteps(s)}function Dr(t){return t._reader._readRequests.length}function No(t){let s=t._reader;return!(s===void 0||!Ve(s))}class He{constructor(s){if(Oe(s,1,"ReadableStreamDefaultReader"),rs(s,"First parameter"),Ze(s))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Oo(this,s),this._readRequests=new B}get closed(){return Ve(this)?this._closedPromise:d(Ir("closed"))}cancel(s=void 0){return Ve(this)?this._ownerReadableStream===void 0?d(Lr("cancel")):Qn(this,s):d(Ir("cancel"))}read(){if(!Ve(this))return d(Ir("read"));if(this._ownerReadableStream===void 0)return d(Lr("read from"));let s,a,u=m((y,_)=>{s=y,a=_});return rr(this,{_chunkSteps:y=>s({value:y,done:!1}),_closeSteps:()=>s({value:void 0,done:!0}),_errorSteps:y=>a(y)}),u}releaseLock(){if(!Ve(this))throw Ir("releaseLock");this._ownerReadableStream!==void 0&&_u(this)}}Object.defineProperties(He.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(He.prototype.cancel,"cancel"),i(He.prototype.read,"read"),i(He.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(He.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ve(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_readRequests")?!1:t instanceof He}function rr(t,s){let a=t._ownerReadableStream;a._disturbed=!0,a._state==="closed"?s._closeSteps():a._state==="errored"?s._errorSteps(a._storedError):a._readableStreamController[xe](s)}function _u(t){ke(t);let s=new TypeError("Reader was released");Wo(t,s)}function Wo(t,s){let a=t._readRequests;t._readRequests=new B,a.forEach(u=>{u._errorSteps(s)})}function Ir(t){return new TypeError(`ReadableStreamDefaultReader.prototype.${t} can only be used on a ReadableStreamDefaultReader`)}let bu=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class qo{constructor(s,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=s,this._preventCancel=a}next(){let s=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?w(this._ongoingPromise,s,s):s(),this._ongoingPromise}return(s){let a=()=>this._returnSteps(s);return this._ongoingPromise?w(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let s=this._reader,a,u,h=m((_,E)=>{a=_,u=E});return rr(s,{_chunkSteps:_=>{this._ongoingPromise=void 0,v(()=>a({value:_,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ke(s),a({value:void 0,done:!0})},_errorSteps:_=>{this._ongoingPromise=void 0,this._isFinished=!0,ke(s),u(_)}}),h}_returnSteps(s){if(this._isFinished)return Promise.resolve({value:s,done:!0});this._isFinished=!0;let a=this._reader;if(!this._preventCancel){let u=Qn(a,s);return ke(a),w(u,()=>({value:s,done:!0}))}return ke(a),c({value:s,done:!0})}}let Mo={next(){return Uo(this)?this._asyncIteratorImpl.next():d(jo("next"))},return(t){return Uo(this)?this._asyncIteratorImpl.return(t):d(jo("return"))}};Object.setPrototypeOf(Mo,bu);function gu(t,s){let a=Pt(t),u=new qo(a,s),h=Object.create(Mo);return h._asyncIteratorImpl=u,h}function Uo(t){if(!n(t)||!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl"))return!1;try{return t._asyncIteratorImpl instanceof qo}catch{return!1}}function jo(t){return new TypeError(`ReadableStreamAsyncIterator.${t} can only be used on a ReadableSteamAsyncIterator`)}let $o=Number.isNaN||function(t){return t!==t};var ss,os,is;function nr(t){return t.slice()}function zo(t,s,a,u,h){new Uint8Array(t).set(new Uint8Array(a,u,h),s)}let Ae=t=>(typeof t.transfer=="function"?Ae=s=>s.transfer():typeof structuredClone=="function"?Ae=s=>structuredClone(s,{transfer:[s]}):Ae=s=>s,Ae(t)),Ge=t=>(typeof t.detached=="boolean"?Ge=s=>s.detached:Ge=s=>s.byteLength===0,Ge(t));function Ho(t,s,a){if(t.slice)return t.slice(s,a);let u=a-s,h=new ArrayBuffer(u);return zo(h,0,t,s,u),h}function Fr(t,s){let a=t[s];if(a!=null){if(typeof a!="function")throw new TypeError(`${String(s)} is not a function`);return a}}function Su(t){let s={[Symbol.iterator]:()=>t.iterator},a=async function*(){return yield*s}(),u=a.next;return{iterator:a,nextMethod:u,done:!1}}let as=(is=(ss=Symbol.asyncIterator)!==null&&ss!==void 0?ss:(os=Symbol.for)===null||os===void 0?void 0:os.call(Symbol,"Symbol.asyncIterator"))!==null&&is!==void 0?is:"@@asyncIterator";function Vo(t,s="sync",a){if(a===void 0)if(s==="async"){if(a=Fr(t,as),a===void 0){let y=Fr(t,Symbol.iterator),_=Vo(t,"sync",y);return Su(_)}}else a=Fr(t,Symbol.iterator);if(a===void 0)throw new TypeError("The object is not iterable");let u=A(a,t,[]);if(!n(u))throw new TypeError("The iterator method must return an object");let h=u.next;return{iterator:u,nextMethod:h,done:!1}}function wu(t){let s=A(t.nextMethod,t.iterator,[]);if(!n(s))throw new TypeError("The iterator.next() method must return an object");return s}function Eu(t){return!!t.done}function Cu(t){return t.value}function Ru(t){return!(typeof t!="number"||$o(t)||t<0)}function Go(t){let s=Ho(t.buffer,t.byteOffset,t.byteOffset+t.byteLength);return new Uint8Array(s)}function ls(t){let s=t._queue.shift();return t._queueTotalSize-=s.size,t._queueTotalSize<0&&(t._queueTotalSize=0),s.value}function us(t,s,a){if(!Ru(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:s,size:a}),t._queueTotalSize+=a}function Tu(t){return t._queue.peek().value}function Ye(t){t._queue=new B,t._queueTotalSize=0}function Yo(t){return t===DataView}function vu(t){return Yo(t.constructor)}function Pu(t){return Yo(t)?1:t.BYTES_PER_ELEMENT}class it{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!cs(this))throw ms("view");return this._view}respond(s){if(!cs(this))throw ms("respond");if(Oe(s,1,"respond"),s=ts(s,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ge(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");Mr(this._associatedReadableByteStreamController,s)}respondWithNewView(s){if(!cs(this))throw ms("respondWithNewView");if(Oe(s,1,"respondWithNewView"),!ArrayBuffer.isView(s))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ge(s.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Ur(this._associatedReadableByteStreamController,s)}}Object.defineProperties(it.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),i(it.prototype.respond,"respond"),i(it.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(it.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Be{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!at(this))throw or("byobRequest");return ps(this)}get desiredSize(){if(!at(this))throw or("desiredSize");return si(this)}close(){if(!at(this))throw or("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be closed`);sr(this)}enqueue(s){if(!at(this))throw or("enqueue");if(Oe(s,1,"enqueue"),!ArrayBuffer.isView(s))throw new TypeError("chunk must be an array buffer view");if(s.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(s.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);qr(this,s)}error(s=void 0){if(!at(this))throw or("error");le(this,s)}[me](s){Ko(this),Ye(this);let a=this._cancelAlgorithm(s);return Wr(this),a}[xe](s){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){ni(this,s);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let h;try{h=new ArrayBuffer(u)}catch(_){s._errorSteps(_);return}let y={buffer:h,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(y)}Fo(a,s),lt(this)}[tr](){if(this._pendingPullIntos.length>0){let s=this._pendingPullIntos.peek();s.readerType="none",this._pendingPullIntos=new B,this._pendingPullIntos.push(s)}}}Object.defineProperties(Be.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),i(Be.prototype.close,"close"),i(Be.prototype.enqueue,"enqueue"),i(Be.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Be.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function at(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")?!1:t instanceof Be}function cs(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")?!1:t instanceof it}function lt(t){if(!Bu(t))return;if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;let a=t._pullAlgorithm();S(a,()=>(t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,lt(t)),null),u=>(le(t,u),null))}function Ko(t){ds(t),t._pendingPullIntos=new B}function fs(t,s){let a=!1;t._state==="closed"&&(a=!0);let u=Qo(s);s.readerType==="default"?ns(t,u,a):Wu(t,u,a)}function Qo(t){let s=t.bytesFilled,a=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,s/a)}function Nr(t,s,a,u){t._queue.push({buffer:s,byteOffset:a,byteLength:u}),t._queueTotalSize+=u}function Jo(t,s,a,u){let h;try{h=Ho(s,a,a+u)}catch(y){throw le(t,y),y}Nr(t,h,0,u)}function Zo(t,s){s.bytesFilled>0&&Jo(t,s.buffer,s.byteOffset,s.bytesFilled),xt(t)}function Xo(t,s){let a=Math.min(t._queueTotalSize,s.byteLength-s.bytesFilled),u=s.bytesFilled+a,h=a,y=!1,_=u%s.elementSize,E=u-_;E>=s.minimumFill&&(h=E-s.bytesFilled,y=!0);let x=t._queue;for(;h>0;){let T=x.peek(),O=Math.min(h,T.byteLength),L=s.byteOffset+s.bytesFilled;zo(s.buffer,L,T.buffer,T.byteOffset,O),T.byteLength===O?x.shift():(T.byteOffset+=O,T.byteLength-=O),t._queueTotalSize-=O,ei(t,O,s),h-=O}return y}function ei(t,s,a){a.bytesFilled+=s}function ti(t){t._queueTotalSize===0&&t._closeRequested?(Wr(t),fr(t._controlledReadableByteStream)):lt(t)}function ds(t){t._byobRequest!==null&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=null,t._byobRequest=null)}function hs(t){for(;t._pendingPullIntos.length>0;){if(t._queueTotalSize===0)return;let s=t._pendingPullIntos.peek();Xo(t,s)&&(xt(t),fs(t._controlledReadableByteStream,s))}}function xu(t){let s=t._controlledReadableByteStream._reader;for(;s._readRequests.length>0;){if(t._queueTotalSize===0)return;let a=s._readRequests.shift();ni(t,a)}}function ku(t,s,a,u){let h=t._controlledReadableByteStream,y=s.constructor,_=Pu(y),{byteOffset:E,byteLength:x}=s,T=a*_,O;try{O=Ae(s.buffer)}catch(N){u._errorSteps(N);return}let L={buffer:O,bufferByteLength:O.byteLength,byteOffset:E,byteLength:x,bytesFilled:0,minimumFill:T,elementSize:_,viewConstructor:y,readerType:"byob"};if(t._pendingPullIntos.length>0){t._pendingPullIntos.push(L),ai(h,u);return}if(h._state==="closed"){let N=new y(L.buffer,L.byteOffset,0);u._closeSteps(N);return}if(t._queueTotalSize>0){if(Xo(t,L)){let N=Qo(L);ti(t),u._chunkSteps(N);return}if(t._closeRequested){let N=new TypeError("Insufficient bytes to fill elements in the given buffer");le(t,N),u._errorSteps(N);return}}t._pendingPullIntos.push(L),ai(h,u),lt(t)}function Ou(t,s){s.readerType==="none"&&xt(t);let a=t._controlledReadableByteStream;if(ys(a))for(;li(a)>0;){let u=xt(t);fs(a,u)}}function Au(t,s,a){if(ei(t,s,a),a.readerType==="none"){Zo(t,a),hs(t);return}if(a.bytesFilled<a.minimumFill)return;xt(t);let u=a.bytesFilled%a.elementSize;if(u>0){let h=a.byteOffset+a.bytesFilled;Jo(t,a.buffer,h-u,u)}a.bytesFilled-=u,fs(t._controlledReadableByteStream,a),hs(t)}function ri(t,s){let a=t._pendingPullIntos.peek();ds(t),t._controlledReadableByteStream._state==="closed"?Ou(t,a):Au(t,s,a),lt(t)}function xt(t){return t._pendingPullIntos.shift()}function Bu(t){let s=t._controlledReadableByteStream;return s._state!=="readable"||t._closeRequested||!t._started?!1:!!(No(s)&&Dr(s)>0||ys(s)&&li(s)>0||si(t)>0)}function Wr(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function sr(t){let s=t._controlledReadableByteStream;if(!(t._closeRequested||s._state!=="readable")){if(t._queueTotalSize>0){t._closeRequested=!0;return}if(t._pendingPullIntos.length>0){let a=t._pendingPullIntos.peek();if(a.bytesFilled%a.elementSize!==0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw le(t,u),u}}Wr(t),fr(s)}}function qr(t,s){let a=t._controlledReadableByteStream;if(t._closeRequested||a._state!=="readable")return;let{buffer:u,byteOffset:h,byteLength:y}=s;if(Ge(u))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let _=Ae(u);if(t._pendingPullIntos.length>0){let E=t._pendingPullIntos.peek();if(Ge(E.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");ds(t),E.buffer=Ae(E.buffer),E.readerType==="none"&&Zo(t,E)}if(No(a))if(xu(t),Dr(a)===0)Nr(t,_,h,y);else{t._pendingPullIntos.length>0&&xt(t);let E=new Uint8Array(_,h,y);ns(a,E,!1)}else ys(a)?(Nr(t,_,h,y),hs(t)):Nr(t,_,h,y);lt(t)}function le(t,s){let a=t._controlledReadableByteStream;a._state==="readable"&&(Ko(t),Ye(t),Wr(t),Bi(a,s))}function ni(t,s){let a=t._queue.shift();t._queueTotalSize-=a.byteLength,ti(t);let u=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);s._chunkSteps(u)}function ps(t){if(t._byobRequest===null&&t._pendingPullIntos.length>0){let s=t._pendingPullIntos.peek(),a=new Uint8Array(s.buffer,s.byteOffset+s.bytesFilled,s.byteLength-s.bytesFilled),u=Object.create(it.prototype);Du(u,t,a),t._byobRequest=u}return t._byobRequest}function si(t){let s=t._controlledReadableByteStream._state;return s==="errored"?null:s==="closed"?0:t._strategyHWM-t._queueTotalSize}function Mr(t,s){let a=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(s!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(s===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+s>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=Ae(a.buffer),ri(t,s)}function Ur(t,s){let a=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(s.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(s.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==s.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==s.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+s.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let h=s.byteLength;a.buffer=Ae(s.buffer),ri(t,h)}function oi(t,s,a,u,h,y,_){s._controlledReadableByteStream=t,s._pullAgain=!1,s._pulling=!1,s._byobRequest=null,s._queue=s._queueTotalSize=void 0,Ye(s),s._closeRequested=!1,s._started=!1,s._strategyHWM=y,s._pullAlgorithm=u,s._cancelAlgorithm=h,s._autoAllocateChunkSize=_,s._pendingPullIntos=new B,t._readableStreamController=s;let E=a();S(c(E),()=>(s._started=!0,lt(s),null),x=>(le(s,x),null))}function Lu(t,s,a){let u=Object.create(Be.prototype),h,y,_;s.start!==void 0?h=()=>s.start(u):h=()=>{},s.pull!==void 0?y=()=>s.pull(u):y=()=>c(void 0),s.cancel!==void 0?_=x=>s.cancel(x):_=()=>c(void 0);let E=s.autoAllocateChunkSize;if(E===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");oi(t,u,h,y,_,a,E)}function Du(t,s,a){t._associatedReadableByteStreamController=s,t._view=a}function ms(t){return new TypeError(`ReadableStreamBYOBRequest.prototype.${t} can only be used on a ReadableStreamBYOBRequest`)}function or(t){return new TypeError(`ReadableByteStreamController.prototype.${t} can only be used on a ReadableByteStreamController`)}function Iu(t,s){Ee(t,s);let a=t==null?void 0:t.mode;return{mode:a===void 0?void 0:Fu(a,`${s} has member 'mode' that`)}}function Fu(t,s){if(t=`${t}`,t!=="byob")throw new TypeError(`${s} '${t}' is not a valid enumeration value for ReadableStreamReaderMode`);return t}function Nu(t,s){var a;Ee(t,s);let u=(a=t==null?void 0:t.min)!==null&&a!==void 0?a:1;return{min:ts(u,`${s} has member 'min' that`)}}function ii(t){return new Ke(t)}function ai(t,s){t._reader._readIntoRequests.push(s)}function Wu(t,s,a){let h=t._reader._readIntoRequests.shift();a?h._closeSteps(s):h._chunkSteps(s)}function li(t){return t._reader._readIntoRequests.length}function ys(t){let s=t._reader;return!(s===void 0||!ut(s))}class Ke{constructor(s){if(Oe(s,1,"ReadableStreamBYOBReader"),rs(s,"First parameter"),Ze(s))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!at(s._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Oo(this,s),this._readIntoRequests=new B}get closed(){return ut(this)?this._closedPromise:d(jr("closed"))}cancel(s=void 0){return ut(this)?this._ownerReadableStream===void 0?d(Lr("cancel")):Qn(this,s):d(jr("cancel"))}read(s,a={}){if(!ut(this))return d(jr("read"));if(!ArrayBuffer.isView(s))return d(new TypeError("view must be an array buffer view"));if(s.byteLength===0)return d(new TypeError("view must have non-zero byteLength"));if(s.buffer.byteLength===0)return d(new TypeError("view's buffer must have non-zero byteLength"));if(Ge(s.buffer))return d(new TypeError("view's buffer has been detached"));let u;try{u=Nu(a,"options")}catch(T){return d(T)}let h=u.min;if(h===0)return d(new TypeError("options.min must be greater than 0"));if(vu(s)){if(h>s.byteLength)return d(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(h>s.length)return d(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return d(Lr("read from"));let y,_,E=m((T,O)=>{y=T,_=O});return ui(this,s,h,{_chunkSteps:T=>y({value:T,done:!1}),_closeSteps:T=>y({value:T,done:!0}),_errorSteps:T=>_(T)}),E}releaseLock(){if(!ut(this))throw jr("releaseLock");this._ownerReadableStream!==void 0&&qu(this)}}Object.defineProperties(Ke.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(Ke.prototype.cancel,"cancel"),i(Ke.prototype.read,"read"),i(Ke.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ke.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function ut(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")?!1:t instanceof Ke}function ui(t,s,a,u){let h=t._ownerReadableStream;h._disturbed=!0,h._state==="errored"?u._errorSteps(h._storedError):ku(h._readableStreamController,s,a,u)}function qu(t){ke(t);let s=new TypeError("Reader was released");ci(t,s)}function ci(t,s){let a=t._readIntoRequests;t._readIntoRequests=new B,a.forEach(u=>{u._errorSteps(s)})}function jr(t){return new TypeError(`ReadableStreamBYOBReader.prototype.${t} can only be used on a ReadableStreamBYOBReader`)}function ir(t,s){let{highWaterMark:a}=t;if(a===void 0)return s;if($o(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function $r(t){let{size:s}=t;return s||(()=>1)}function zr(t,s){Ee(t,s);let a=t==null?void 0:t.highWaterMark,u=t==null?void 0:t.size;return{highWaterMark:a===void 0?void 0:es(a),size:u===void 0?void 0:Mu(u,`${s} has member 'size' that`)}}function Mu(t,s){return ae(t,s),a=>es(t(a))}function Uu(t,s){Ee(t,s);let a=t==null?void 0:t.abort,u=t==null?void 0:t.close,h=t==null?void 0:t.start,y=t==null?void 0:t.type,_=t==null?void 0:t.write;return{abort:a===void 0?void 0:ju(a,t,`${s} has member 'abort' that`),close:u===void 0?void 0:$u(u,t,`${s} has member 'close' that`),start:h===void 0?void 0:zu(h,t,`${s} has member 'start' that`),write:_===void 0?void 0:Hu(_,t,`${s} has member 'write' that`),type:y}}function ju(t,s,a){return ae(t,a),u=>F(t,s,[u])}function $u(t,s,a){return ae(t,a),()=>F(t,s,[])}function zu(t,s,a){return ae(t,a),u=>A(t,s,[u])}function Hu(t,s,a){return ae(t,a),(u,h)=>F(t,s,[u,h])}function fi(t,s){if(!kt(t))throw new TypeError(`${s} is not a WritableStream.`)}function Vu(t){if(typeof t!="object"||t===null)return!1;try{return typeof t.aborted=="boolean"}catch{return!1}}let Gu=typeof AbortController=="function";function Yu(){if(Gu)return new AbortController}class Qe{constructor(s={},a={}){s===void 0?s=null:Do(s,"First parameter");let u=zr(a,"Second parameter"),h=Uu(s,"First parameter");if(hi(this),h.type!==void 0)throw new RangeError("Invalid type is specified");let _=$r(u),E=ir(u,1);lc(this,h,E,_)}get locked(){if(!kt(this))throw Kr("locked");return Ot(this)}abort(s=void 0){return kt(this)?Ot(this)?d(new TypeError("Cannot abort a stream that already has a writer")):Hr(this,s):d(Kr("abort"))}close(){return kt(this)?Ot(this)?d(new TypeError("Cannot close a stream that already has a writer")):Ce(this)?d(new TypeError("Cannot close an already-closing stream")):pi(this):d(Kr("close"))}getWriter(){if(!kt(this))throw Kr("getWriter");return di(this)}}Object.defineProperties(Qe.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),i(Qe.prototype.abort,"abort"),i(Qe.prototype.close,"close"),i(Qe.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function di(t){return new Le(t)}function Ku(t,s,a,u,h=1,y=()=>1){let _=Object.create(Qe.prototype);hi(_);let E=Object.create(At.prototype);return Si(_,E,t,s,a,u,h,y),_}function hi(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new B,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function kt(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")?!1:t instanceof Qe}function Ot(t){return t._writer!==void 0}function Hr(t,s){var a;if(t._state==="closed"||t._state==="errored")return c(void 0);t._writableStreamController._abortReason=s,(a=t._writableStreamController._abortController)===null||a===void 0||a.abort(s);let u=t._state;if(u==="closed"||u==="errored")return c(void 0);if(t._pendingAbortRequest!==void 0)return t._pendingAbortRequest._promise;let h=!1;u==="erroring"&&(h=!0,s=void 0);let y=m((_,E)=>{t._pendingAbortRequest={_promise:void 0,_resolve:_,_reject:E,_reason:s,_wasAlreadyErroring:h}});return t._pendingAbortRequest._promise=y,h||bs(t,s),y}function pi(t){let s=t._state;if(s==="closed"||s==="errored")return d(new TypeError(`The stream (in ${s} state) is not in the writable state and cannot be closed`));let a=m((h,y)=>{let _={_resolve:h,_reject:y};t._closeRequest=_}),u=t._writer;return u!==void 0&&t._backpressure&&s==="writable"&&vs(u),uc(t._writableStreamController),a}function Qu(t){return m((a,u)=>{let h={_resolve:a,_reject:u};t._writeRequests.push(h)})}function _s(t,s){if(t._state==="writable"){bs(t,s);return}gs(t)}function bs(t,s){let a=t._writableStreamController;t._state="erroring",t._storedError=s;let u=t._writer;u!==void 0&&yi(u,s),!tc(t)&&a._started&&gs(t)}function gs(t){t._state="errored",t._writableStreamController[j]();let s=t._storedError;if(t._writeRequests.forEach(h=>{h._reject(s)}),t._writeRequests=new B,t._pendingAbortRequest===void 0){Vr(t);return}let a=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(s),Vr(t);return}let u=t._writableStreamController[I](a._reason);S(u,()=>(a._resolve(),Vr(t),null),h=>(a._reject(h),Vr(t),null))}function Ju(t){t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}function Zu(t,s){t._inFlightWriteRequest._reject(s),t._inFlightWriteRequest=void 0,_s(t,s)}function Xu(t){t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0,t._state==="erroring"&&(t._storedError=void 0,t._pendingAbortRequest!==void 0&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";let a=t._writer;a!==void 0&&Ri(a)}function ec(t,s){t._inFlightCloseRequest._reject(s),t._inFlightCloseRequest=void 0,t._pendingAbortRequest!==void 0&&(t._pendingAbortRequest._reject(s),t._pendingAbortRequest=void 0),_s(t,s)}function Ce(t){return!(t._closeRequest===void 0&&t._inFlightCloseRequest===void 0)}function tc(t){return!(t._inFlightWriteRequest===void 0&&t._inFlightCloseRequest===void 0)}function rc(t){t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0}function nc(t){t._inFlightWriteRequest=t._writeRequests.shift()}function Vr(t){t._closeRequest!==void 0&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);let s=t._writer;s!==void 0&&Rs(s,t._storedError)}function Ss(t,s){let a=t._writer;a!==void 0&&s!==t._backpressure&&(s?yc(a):vs(a)),t._backpressure=s}class Le{constructor(s){if(Oe(s,1,"WritableStreamDefaultWriter"),fi(s,"First parameter"),Ot(s))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=s,s._writer=this;let a=s._state;if(a==="writable")!Ce(s)&&s._backpressure?Jr(this):Ti(this),Qr(this);else if(a==="erroring")Ts(this,s._storedError),Qr(this);else if(a==="closed")Ti(this),pc(this);else{let u=s._storedError;Ts(this,u),Ci(this,u)}}get closed(){return ct(this)?this._closedPromise:d(ft("closed"))}get desiredSize(){if(!ct(this))throw ft("desiredSize");if(this._ownerWritableStream===void 0)throw lr("desiredSize");return ac(this)}get ready(){return ct(this)?this._readyPromise:d(ft("ready"))}abort(s=void 0){return ct(this)?this._ownerWritableStream===void 0?d(lr("abort")):sc(this,s):d(ft("abort"))}close(){if(!ct(this))return d(ft("close"));let s=this._ownerWritableStream;return s===void 0?d(lr("close")):Ce(s)?d(new TypeError("Cannot close an already-closing stream")):mi(this)}releaseLock(){if(!ct(this))throw ft("releaseLock");this._ownerWritableStream!==void 0&&_i(this)}write(s=void 0){return ct(this)?this._ownerWritableStream===void 0?d(lr("write to")):bi(this,s):d(ft("write"))}}Object.defineProperties(Le.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),i(Le.prototype.abort,"abort"),i(Le.prototype.close,"close"),i(Le.prototype.releaseLock,"releaseLock"),i(Le.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Le.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function ct(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")?!1:t instanceof Le}function sc(t,s){let a=t._ownerWritableStream;return Hr(a,s)}function mi(t){let s=t._ownerWritableStream;return pi(s)}function oc(t){let s=t._ownerWritableStream,a=s._state;return Ce(s)||a==="closed"?c(void 0):a==="errored"?d(s._storedError):mi(t)}function ic(t,s){t._closedPromiseState==="pending"?Rs(t,s):mc(t,s)}function yi(t,s){t._readyPromiseState==="pending"?vi(t,s):_c(t,s)}function ac(t){let s=t._ownerWritableStream,a=s._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:wi(s._writableStreamController)}function _i(t){let s=t._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");yi(t,a),ic(t,a),s._writer=void 0,t._ownerWritableStream=void 0}function bi(t,s){let a=t._ownerWritableStream,u=a._writableStreamController,h=cc(u,s);if(a!==t._ownerWritableStream)return d(lr("write to"));let y=a._state;if(y==="errored")return d(a._storedError);if(Ce(a)||y==="closed")return d(new TypeError("The stream is closing or closed and cannot be written to"));if(y==="erroring")return d(a._storedError);let _=Qu(a);return fc(u,s,h),_}let gi={};class At{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!ws(this))throw Cs("abortReason");return this._abortReason}get signal(){if(!ws(this))throw Cs("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(s=void 0){if(!ws(this))throw Cs("error");this._controlledWritableStream._state==="writable"&&Ei(this,s)}[I](s){let a=this._abortAlgorithm(s);return Gr(this),a}[j](){Ye(this)}}Object.defineProperties(At.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(At.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function ws(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")?!1:t instanceof At}function Si(t,s,a,u,h,y,_,E){s._controlledWritableStream=t,t._writableStreamController=s,s._queue=void 0,s._queueTotalSize=void 0,Ye(s),s._abortReason=void 0,s._abortController=Yu(),s._started=!1,s._strategySizeAlgorithm=E,s._strategyHWM=_,s._writeAlgorithm=u,s._closeAlgorithm=h,s._abortAlgorithm=y;let x=Es(s);Ss(t,x);let T=a(),O=c(T);S(O,()=>(s._started=!0,Yr(s),null),L=>(s._started=!0,_s(t,L),null))}function lc(t,s,a,u){let h=Object.create(At.prototype),y,_,E,x;s.start!==void 0?y=()=>s.start(h):y=()=>{},s.write!==void 0?_=T=>s.write(T,h):_=()=>c(void 0),s.close!==void 0?E=()=>s.close():E=()=>c(void 0),s.abort!==void 0?x=T=>s.abort(T):x=()=>c(void 0),Si(t,h,y,_,E,x,a,u)}function Gr(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function uc(t){us(t,gi,0),Yr(t)}function cc(t,s){try{return t._strategySizeAlgorithm(s)}catch(a){return ar(t,a),1}}function wi(t){return t._strategyHWM-t._queueTotalSize}function fc(t,s,a){try{us(t,s,a)}catch(h){ar(t,h);return}let u=t._controlledWritableStream;if(!Ce(u)&&u._state==="writable"){let h=Es(t);Ss(u,h)}Yr(t)}function Yr(t){let s=t._controlledWritableStream;if(!t._started||s._inFlightWriteRequest!==void 0)return;if(s._state==="erroring"){gs(s);return}if(t._queue.length===0)return;let u=Tu(t);u===gi?dc(t):hc(t,u)}function ar(t,s){t._controlledWritableStream._state==="writable"&&Ei(t,s)}function dc(t){let s=t._controlledWritableStream;rc(s),ls(t);let a=t._closeAlgorithm();Gr(t),S(a,()=>(Xu(s),null),u=>(ec(s,u),null))}function hc(t,s){let a=t._controlledWritableStream;nc(a);let u=t._writeAlgorithm(s);S(u,()=>{Ju(a);let h=a._state;if(ls(t),!Ce(a)&&h==="writable"){let y=Es(t);Ss(a,y)}return Yr(t),null},h=>(a._state==="writable"&&Gr(t),Zu(a,h),null))}function Es(t){return wi(t)<=0}function Ei(t,s){let a=t._controlledWritableStream;Gr(t),bs(a,s)}function Kr(t){return new TypeError(`WritableStream.prototype.${t} can only be used on a WritableStream`)}function Cs(t){return new TypeError(`WritableStreamDefaultController.prototype.${t} can only be used on a WritableStreamDefaultController`)}function ft(t){return new TypeError(`WritableStreamDefaultWriter.prototype.${t} can only be used on a WritableStreamDefaultWriter`)}function lr(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function Qr(t){t._closedPromise=m((s,a)=>{t._closedPromise_resolve=s,t._closedPromise_reject=a,t._closedPromiseState="pending"})}function Ci(t,s){Qr(t),Rs(t,s)}function pc(t){Qr(t),Ri(t)}function Rs(t,s){t._closedPromise_reject!==void 0&&(C(t._closedPromise),t._closedPromise_reject(s),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected")}function mc(t,s){Ci(t,s)}function Ri(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved")}function Jr(t){t._readyPromise=m((s,a)=>{t._readyPromise_resolve=s,t._readyPromise_reject=a}),t._readyPromiseState="pending"}function Ts(t,s){Jr(t),vi(t,s)}function Ti(t){Jr(t),vs(t)}function vi(t,s){t._readyPromise_reject!==void 0&&(C(t._readyPromise),t._readyPromise_reject(s),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected")}function yc(t){Jr(t)}function _c(t,s){Ts(t,s)}function vs(t){t._readyPromise_resolve!==void 0&&(t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled")}function bc(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let Ps=bc();function gc(t){if(!(typeof t=="function"||typeof t=="object")||t.name!=="DOMException")return!1;try{return new t,!0}catch{return!1}}function Sc(){let t=Ps==null?void 0:Ps.DOMException;return gc(t)?t:void 0}function wc(){let t=function(a,u){this.message=a||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return i(t,"DOMException"),t.prototype=Object.create(Error.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}let Ec=Sc()||wc();function Pi(t,s,a,u,h,y){let _=Pt(t),E=di(s);t._disturbed=!0;let x=!1,T=c(void 0);return m((O,L)=>{let N;if(y!==void 0){if(N=()=>{let P=y.reason!==void 0?y.reason:new Ec("Aborted","AbortError"),D=[];u||D.push(()=>s._state==="writable"?Hr(s,P):c(void 0)),h||D.push(()=>t._state==="readable"?_e(t,P):c(void 0)),Q(()=>Promise.all(D.map(W=>W())),!0,P)},y.aborted){N();return}y.addEventListener("abort",N)}function be(){return m((P,D)=>{function W(ee){ee?P():b(It(),W,D)}W(!1)})}function It(){return x?c(!0):b(E._readyPromise,()=>m((P,D)=>{rr(_,{_chunkSteps:W=>{T=b(bi(E,W),void 0,e),P(!1)},_closeSteps:()=>P(!0),_errorSteps:D})}))}if(Ie(t,_._closedPromise,P=>(u?ue(!0,P):Q(()=>Hr(s,P),!0,P),null)),Ie(s,E._closedPromise,P=>(h?ue(!0,P):Q(()=>_e(t,P),!0,P),null)),K(t,_._closedPromise,()=>(a?ue():Q(()=>oc(E)),null)),Ce(s)||s._state==="closed"){let P=new TypeError("the destination writable stream closed before all data could be piped to it");h?ue(!0,P):Q(()=>_e(t,P),!0,P)}C(be());function et(){let P=T;return b(T,()=>P!==T?et():void 0)}function Ie(P,D,W){P._state==="errored"?W(P._storedError):g(D,W)}function K(P,D,W){P._state==="closed"?W():R(D,W)}function Q(P,D,W){if(x)return;x=!0,s._state==="writable"&&!Ce(s)?R(et(),ee):ee();function ee(){return S(P(),()=>Fe(D,W),Ft=>Fe(!0,Ft)),null}}function ue(P,D){x||(x=!0,s._state==="writable"&&!Ce(s)?R(et(),()=>Fe(P,D)):Fe(P,D))}function Fe(P,D){return _i(E),ke(_),y!==void 0&&y.removeEventListener("abort",N),P?L(D):O(void 0),null}})}class De{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Zr(this))throw en("desiredSize");return xs(this)}close(){if(!Zr(this))throw en("close");if(!Lt(this))throw new TypeError("The stream is not in a state that permits close");dt(this)}enqueue(s=void 0){if(!Zr(this))throw en("enqueue");if(!Lt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Bt(this,s)}error(s=void 0){if(!Zr(this))throw en("error");ye(this,s)}[me](s){Ye(this);let a=this._cancelAlgorithm(s);return Xr(this),a}[xe](s){let a=this._controlledReadableStream;if(this._queue.length>0){let u=ls(this);this._closeRequested&&this._queue.length===0?(Xr(this),fr(a)):ur(this),s._chunkSteps(u)}else Fo(a,s),ur(this)}[tr](){}}Object.defineProperties(De.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),i(De.prototype.close,"close"),i(De.prototype.enqueue,"enqueue"),i(De.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(De.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Zr(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")?!1:t instanceof De}function ur(t){if(!xi(t))return;if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;let a=t._pullAlgorithm();S(a,()=>(t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,ur(t)),null),u=>(ye(t,u),null))}function xi(t){let s=t._controlledReadableStream;return!Lt(t)||!t._started?!1:!!(Ze(s)&&Dr(s)>0||xs(t)>0)}function Xr(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function dt(t){if(!Lt(t))return;let s=t._controlledReadableStream;t._closeRequested=!0,t._queue.length===0&&(Xr(t),fr(s))}function Bt(t,s){if(!Lt(t))return;let a=t._controlledReadableStream;if(Ze(a)&&Dr(a)>0)ns(a,s,!1);else{let u;try{u=t._strategySizeAlgorithm(s)}catch(h){throw ye(t,h),h}try{us(t,s,u)}catch(h){throw ye(t,h),h}}ur(t)}function ye(t,s){let a=t._controlledReadableStream;a._state==="readable"&&(Ye(t),Xr(t),Bi(a,s))}function xs(t){let s=t._controlledReadableStream._state;return s==="errored"?null:s==="closed"?0:t._strategyHWM-t._queueTotalSize}function Cc(t){return!xi(t)}function Lt(t){let s=t._controlledReadableStream._state;return!t._closeRequested&&s==="readable"}function ki(t,s,a,u,h,y,_){s._controlledReadableStream=t,s._queue=void 0,s._queueTotalSize=void 0,Ye(s),s._started=!1,s._closeRequested=!1,s._pullAgain=!1,s._pulling=!1,s._strategySizeAlgorithm=_,s._strategyHWM=y,s._pullAlgorithm=u,s._cancelAlgorithm=h,t._readableStreamController=s;let E=a();S(c(E),()=>(s._started=!0,ur(s),null),x=>(ye(s,x),null))}function Rc(t,s,a,u){let h=Object.create(De.prototype),y,_,E;s.start!==void 0?y=()=>s.start(h):y=()=>{},s.pull!==void 0?_=()=>s.pull(h):_=()=>c(void 0),s.cancel!==void 0?E=x=>s.cancel(x):E=()=>c(void 0),ki(t,h,y,_,E,a,u)}function en(t){return new TypeError(`ReadableStreamDefaultController.prototype.${t} can only be used on a ReadableStreamDefaultController`)}function Tc(t,s){return at(t._readableStreamController)?Pc(t):vc(t)}function vc(t,s){let a=Pt(t),u=!1,h=!1,y=!1,_=!1,E,x,T,O,L,N=m(K=>{L=K});function be(){return u?(h=!0,c(void 0)):(u=!0,rr(a,{_chunkSteps:Q=>{v(()=>{h=!1;let ue=Q,Fe=Q;y||Bt(T._readableStreamController,ue),_||Bt(O._readableStreamController,Fe),u=!1,h&&be()})},_closeSteps:()=>{u=!1,y||dt(T._readableStreamController),_||dt(O._readableStreamController),(!y||!_)&&L(void 0)},_errorSteps:()=>{u=!1}}),c(void 0))}function It(K){if(y=!0,E=K,_){let Q=nr([E,x]),ue=_e(t,Q);L(ue)}return N}function et(K){if(_=!0,x=K,y){let Q=nr([E,x]),ue=_e(t,Q);L(ue)}return N}function Ie(){}return T=cr(Ie,be,It),O=cr(Ie,be,et),g(a._closedPromise,K=>(ye(T._readableStreamController,K),ye(O._readableStreamController,K),(!y||!_)&&L(void 0),null)),[T,O]}function Pc(t){let s=Pt(t),a=!1,u=!1,h=!1,y=!1,_=!1,E,x,T,O,L,N=m(P=>{L=P});function be(P){g(P._closedPromise,D=>(P!==s||(le(T._readableStreamController,D),le(O._readableStreamController,D),(!y||!_)&&L(void 0)),null))}function It(){ut(s)&&(ke(s),s=Pt(t),be(s)),rr(s,{_chunkSteps:D=>{v(()=>{u=!1,h=!1;let W=D,ee=D;if(!y&&!_)try{ee=Go(D)}catch(Ft){le(T._readableStreamController,Ft),le(O._readableStreamController,Ft),L(_e(t,Ft));return}y||qr(T._readableStreamController,W),_||qr(O._readableStreamController,ee),a=!1,u?Ie():h&&K()})},_closeSteps:()=>{a=!1,y||sr(T._readableStreamController),_||sr(O._readableStreamController),T._readableStreamController._pendingPullIntos.length>0&&Mr(T._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&Mr(O._readableStreamController,0),(!y||!_)&&L(void 0)},_errorSteps:()=>{a=!1}})}function et(P,D){Ve(s)&&(ke(s),s=ii(t),be(s));let W=D?O:T,ee=D?T:O;ui(s,P,1,{_chunkSteps:Nt=>{v(()=>{u=!1,h=!1;let Wt=D?_:y;if(D?y:_)Wt||Ur(W._readableStreamController,Nt);else{let Hi;try{Hi=Go(Nt)}catch(Ls){le(W._readableStreamController,Ls),le(ee._readableStreamController,Ls),L(_e(t,Ls));return}Wt||Ur(W._readableStreamController,Nt),qr(ee._readableStreamController,Hi)}a=!1,u?Ie():h&&K()})},_closeSteps:Nt=>{a=!1;let Wt=D?_:y,un=D?y:_;Wt||sr(W._readableStreamController),un||sr(ee._readableStreamController),Nt!==void 0&&(Wt||Ur(W._readableStreamController,Nt),!un&&ee._readableStreamController._pendingPullIntos.length>0&&Mr(ee._readableStreamController,0)),(!Wt||!un)&&L(void 0)},_errorSteps:()=>{a=!1}})}function Ie(){if(a)return u=!0,c(void 0);a=!0;let P=ps(T._readableStreamController);return P===null?It():et(P._view,!1),c(void 0)}function K(){if(a)return h=!0,c(void 0);a=!0;let P=ps(O._readableStreamController);return P===null?It():et(P._view,!0),c(void 0)}function Q(P){if(y=!0,E=P,_){let D=nr([E,x]),W=_e(t,D);L(W)}return N}function ue(P){if(_=!0,x=P,y){let D=nr([E,x]),W=_e(t,D);L(W)}return N}function Fe(){}return T=Ai(Fe,Ie,Q),O=Ai(Fe,K,ue),be(s),[T,O]}function xc(t){return n(t)&&typeof t.getReader<"u"}function kc(t){return xc(t)?Ac(t.getReader()):Oc(t)}function Oc(t){let s,a=Vo(t,"async"),u=e;function h(){let _;try{_=wu(a)}catch(x){return d(x)}let E=c(_);return w(E,x=>{if(!n(x))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Eu(x))dt(s._readableStreamController);else{let O=Cu(x);Bt(s._readableStreamController,O)}})}function y(_){let E=a.iterator,x;try{x=Fr(E,"return")}catch(L){return d(L)}if(x===void 0)return c(void 0);let T;try{T=A(x,E,[_])}catch(L){return d(L)}let O=c(T);return w(O,L=>{if(!n(L))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return s=cr(u,h,y,0),s}function Ac(t){let s,a=e;function u(){let y;try{y=t.read()}catch(_){return d(_)}return w(y,_=>{if(!n(_))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(_.done)dt(s._readableStreamController);else{let E=_.value;Bt(s._readableStreamController,E)}})}function h(y){try{return c(t.cancel(y))}catch(_){return d(_)}}return s=cr(a,u,h,0),s}function Bc(t,s){Ee(t,s);let a=t,u=a==null?void 0:a.autoAllocateChunkSize,h=a==null?void 0:a.cancel,y=a==null?void 0:a.pull,_=a==null?void 0:a.start,E=a==null?void 0:a.type;return{autoAllocateChunkSize:u===void 0?void 0:ts(u,`${s} has member 'autoAllocateChunkSize' that`),cancel:h===void 0?void 0:Lc(h,a,`${s} has member 'cancel' that`),pull:y===void 0?void 0:Dc(y,a,`${s} has member 'pull' that`),start:_===void 0?void 0:Ic(_,a,`${s} has member 'start' that`),type:E===void 0?void 0:Fc(E,`${s} has member 'type' that`)}}function Lc(t,s,a){return ae(t,a),u=>F(t,s,[u])}function Dc(t,s,a){return ae(t,a),u=>F(t,s,[u])}function Ic(t,s,a){return ae(t,a),u=>A(t,s,[u])}function Fc(t,s){if(t=`${t}`,t!=="bytes")throw new TypeError(`${s} '${t}' is not a valid enumeration value for ReadableStreamType`);return t}function Nc(t,s){return Ee(t,s),{preventCancel:!!(t==null?void 0:t.preventCancel)}}function Oi(t,s){Ee(t,s);let a=t==null?void 0:t.preventAbort,u=t==null?void 0:t.preventCancel,h=t==null?void 0:t.preventClose,y=t==null?void 0:t.signal;return y!==void 0&&Wc(y,`${s} has member 'signal' that`),{preventAbort:!!a,preventCancel:!!u,preventClose:!!h,signal:y}}function Wc(t,s){if(!Vu(t))throw new TypeError(`${s} is not an AbortSignal.`)}function qc(t,s){Ee(t,s);let a=t==null?void 0:t.readable;Xn(a,"readable","ReadableWritablePair"),rs(a,`${s} has member 'readable' that`);let u=t==null?void 0:t.writable;return Xn(u,"writable","ReadableWritablePair"),fi(u,`${s} has member 'writable' that`),{readable:a,writable:u}}class Y{constructor(s={},a={}){s===void 0?s=null:Do(s,"First parameter");let u=zr(a,"Second parameter"),h=Bc(s,"First parameter");if(ks(this),h.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let y=ir(u,0);Lu(this,h,y)}else{let y=$r(u),_=ir(u,1);Rc(this,h,_,y)}}get locked(){if(!Je(this))throw ht("locked");return Ze(this)}cancel(s=void 0){return Je(this)?Ze(this)?d(new TypeError("Cannot cancel a stream that already has a reader")):_e(this,s):d(ht("cancel"))}getReader(s=void 0){if(!Je(this))throw ht("getReader");return Iu(s,"First parameter").mode===void 0?Pt(this):ii(this)}pipeThrough(s,a={}){if(!Je(this))throw ht("pipeThrough");Oe(s,1,"pipeThrough");let u=qc(s,"First parameter"),h=Oi(a,"Second parameter");if(Ze(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ot(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let y=Pi(this,u.writable,h.preventClose,h.preventAbort,h.preventCancel,h.signal);return C(y),u.readable}pipeTo(s,a={}){if(!Je(this))return d(ht("pipeTo"));if(s===void 0)return d("Parameter 1 is required in 'pipeTo'.");if(!kt(s))return d(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=Oi(a,"Second parameter")}catch(h){return d(h)}return Ze(this)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ot(s)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Pi(this,s,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Je(this))throw ht("tee");let s=Tc(this);return nr(s)}values(s=void 0){if(!Je(this))throw ht("values");let a=Nc(s,"First parameter");return gu(this,a.preventCancel)}[as](s){return this.values(s)}static from(s){return kc(s)}}Object.defineProperties(Y,{from:{enumerable:!0}}),Object.defineProperties(Y.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),i(Y.from,"from"),i(Y.prototype.cancel,"cancel"),i(Y.prototype.getReader,"getReader"),i(Y.prototype.pipeThrough,"pipeThrough"),i(Y.prototype.pipeTo,"pipeTo"),i(Y.prototype.tee,"tee"),i(Y.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Y.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(Y.prototype,as,{value:Y.prototype.values,writable:!0,configurable:!0});function cr(t,s,a,u=1,h=()=>1){let y=Object.create(Y.prototype);ks(y);let _=Object.create(De.prototype);return ki(y,_,t,s,a,u,h),y}function Ai(t,s,a){let u=Object.create(Y.prototype);ks(u);let h=Object.create(Be.prototype);return oi(u,h,t,s,a,0,void 0),u}function ks(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function Je(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")?!1:t instanceof Y}function Ze(t){return t._reader!==void 0}function _e(t,s){if(t._disturbed=!0,t._state==="closed")return c(void 0);if(t._state==="errored")return d(t._storedError);fr(t);let a=t._reader;if(a!==void 0&&ut(a)){let h=a._readIntoRequests;a._readIntoRequests=new B,h.forEach(y=>{y._closeSteps(void 0)})}let u=t._readableStreamController[me](s);return w(u,e)}function fr(t){t._state="closed";let s=t._reader;if(s!==void 0&&(Bo(s),Ve(s))){let a=s._readRequests;s._readRequests=new B,a.forEach(u=>{u._closeSteps()})}}function Bi(t,s){t._state="errored",t._storedError=s;let a=t._reader;a!==void 0&&(Zn(a,s),Ve(a)?Wo(a,s):ci(a,s))}function ht(t){return new TypeError(`ReadableStream.prototype.${t} can only be used on a ReadableStream`)}function Li(t,s){Ee(t,s);let a=t==null?void 0:t.highWaterMark;return Xn(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:es(a)}}let Di=t=>t.byteLength;i(Di,"size");class tn{constructor(s){Oe(s,1,"ByteLengthQueuingStrategy"),s=Li(s,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=s.highWaterMark}get highWaterMark(){if(!Fi(this))throw Ii("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Fi(this))throw Ii("size");return Di}}Object.defineProperties(tn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(tn.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Ii(t){return new TypeError(`ByteLengthQueuingStrategy.prototype.${t} can only be used on a ByteLengthQueuingStrategy`)}function Fi(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_byteLengthQueuingStrategyHighWaterMark")?!1:t instanceof tn}let Ni=()=>1;i(Ni,"size");class rn{constructor(s){Oe(s,1,"CountQueuingStrategy"),s=Li(s,"First parameter"),this._countQueuingStrategyHighWaterMark=s.highWaterMark}get highWaterMark(){if(!qi(this))throw Wi("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!qi(this))throw Wi("size");return Ni}}Object.defineProperties(rn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(rn.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Wi(t){return new TypeError(`CountQueuingStrategy.prototype.${t} can only be used on a CountQueuingStrategy`)}function qi(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_countQueuingStrategyHighWaterMark")?!1:t instanceof rn}function Mc(t,s){Ee(t,s);let a=t==null?void 0:t.cancel,u=t==null?void 0:t.flush,h=t==null?void 0:t.readableType,y=t==null?void 0:t.start,_=t==null?void 0:t.transform,E=t==null?void 0:t.writableType;return{cancel:a===void 0?void 0:zc(a,t,`${s} has member 'cancel' that`),flush:u===void 0?void 0:Uc(u,t,`${s} has member 'flush' that`),readableType:h,start:y===void 0?void 0:jc(y,t,`${s} has member 'start' that`),transform:_===void 0?void 0:$c(_,t,`${s} has member 'transform' that`),writableType:E}}function Uc(t,s,a){return ae(t,a),u=>F(t,s,[u])}function jc(t,s,a){return ae(t,a),u=>A(t,s,[u])}function $c(t,s,a){return ae(t,a),(u,h)=>F(t,s,[u,h])}function zc(t,s,a){return ae(t,a),u=>F(t,s,[u])}class nn{constructor(s={},a={},u={}){s===void 0&&(s=null);let h=zr(a,"Second parameter"),y=zr(u,"Third parameter"),_=Mc(s,"First parameter");if(_.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(_.writableType!==void 0)throw new RangeError("Invalid writableType specified");let E=ir(y,0),x=$r(y),T=ir(h,1),O=$r(h),L,N=m(be=>{L=be});Hc(this,N,T,O,E,x),Gc(this,_),_.start!==void 0?L(_.start(this._transformStreamController)):L(void 0)}get readable(){if(!Mi(this))throw zi("readable");return this._readable}get writable(){if(!Mi(this))throw zi("writable");return this._writable}}Object.defineProperties(nn.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(nn.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function Hc(t,s,a,u,h,y){function _(){return s}function E(N){return Qc(t,N)}function x(N){return Jc(t,N)}function T(){return Zc(t)}t._writable=Ku(_,E,T,x,a,u);function O(){return Xc(t)}function L(N){return ef(t,N)}t._readable=cr(_,O,L,h,y),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,sn(t,!0),t._transformStreamController=void 0}function Mi(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")?!1:t instanceof nn}function Ui(t,s){ye(t._readable._readableStreamController,s),Os(t,s)}function Os(t,s){an(t._transformStreamController),ar(t._writable._writableStreamController,s),As(t)}function As(t){t._backpressure&&sn(t,!1)}function sn(t,s){t._backpressureChangePromise!==void 0&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=m(a=>{t._backpressureChangePromise_resolve=a}),t._backpressure=s}class Xe{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!on(this))throw ln("desiredSize");let s=this._controlledTransformStream._readable._readableStreamController;return xs(s)}enqueue(s=void 0){if(!on(this))throw ln("enqueue");ji(this,s)}error(s=void 0){if(!on(this))throw ln("error");Yc(this,s)}terminate(){if(!on(this))throw ln("terminate");Kc(this)}}Object.defineProperties(Xe.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),i(Xe.prototype.enqueue,"enqueue"),i(Xe.prototype.error,"error"),i(Xe.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Xe.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function on(t){return!n(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")?!1:t instanceof Xe}function Vc(t,s,a,u,h){s._controlledTransformStream=t,t._transformStreamController=s,s._transformAlgorithm=a,s._flushAlgorithm=u,s._cancelAlgorithm=h,s._finishPromise=void 0,s._finishPromise_resolve=void 0,s._finishPromise_reject=void 0}function Gc(t,s){let a=Object.create(Xe.prototype),u,h,y;s.transform!==void 0?u=_=>s.transform(_,a):u=_=>{try{return ji(a,_),c(void 0)}catch(E){return d(E)}},s.flush!==void 0?h=()=>s.flush(a):h=()=>c(void 0),s.cancel!==void 0?y=_=>s.cancel(_):y=()=>c(void 0),Vc(t,a,u,h,y)}function an(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0,t._cancelAlgorithm=void 0}function ji(t,s){let a=t._controlledTransformStream,u=a._readable._readableStreamController;if(!Lt(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{Bt(u,s)}catch(y){throw Os(a,y),a._readable._storedError}Cc(u)!==a._backpressure&&sn(a,!0)}function Yc(t,s){Ui(t._controlledTransformStream,s)}function $i(t,s){let a=t._transformAlgorithm(s);return w(a,void 0,u=>{throw Ui(t._controlledTransformStream,u),u})}function Kc(t){let s=t._controlledTransformStream,a=s._readable._readableStreamController;dt(a);let u=new TypeError("TransformStream terminated");Os(s,u)}function Qc(t,s){let a=t._transformStreamController;if(t._backpressure){let u=t._backpressureChangePromise;return w(u,()=>{let h=t._writable;if(h._state==="erroring")throw h._storedError;return $i(a,s)})}return $i(a,s)}function Jc(t,s){let a=t._transformStreamController;if(a._finishPromise!==void 0)return a._finishPromise;let u=t._readable;a._finishPromise=m((y,_)=>{a._finishPromise_resolve=y,a._finishPromise_reject=_});let h=a._cancelAlgorithm(s);return an(a),S(h,()=>(u._state==="errored"?Dt(a,u._storedError):(ye(u._readableStreamController,s),Bs(a)),null),y=>(ye(u._readableStreamController,y),Dt(a,y),null)),a._finishPromise}function Zc(t){let s=t._transformStreamController;if(s._finishPromise!==void 0)return s._finishPromise;let a=t._readable;s._finishPromise=m((h,y)=>{s._finishPromise_resolve=h,s._finishPromise_reject=y});let u=s._flushAlgorithm();return an(s),S(u,()=>(a._state==="errored"?Dt(s,a._storedError):(dt(a._readableStreamController),Bs(s)),null),h=>(ye(a._readableStreamController,h),Dt(s,h),null)),s._finishPromise}function Xc(t){return sn(t,!1),t._backpressureChangePromise}function ef(t,s){let a=t._transformStreamController;if(a._finishPromise!==void 0)return a._finishPromise;let u=t._writable;a._finishPromise=m((y,_)=>{a._finishPromise_resolve=y,a._finishPromise_reject=_});let h=a._cancelAlgorithm(s);return an(a),S(h,()=>(u._state==="errored"?Dt(a,u._storedError):(ar(u._writableStreamController,s),As(t),Bs(a)),null),y=>(ar(u._writableStreamController,y),As(t),Dt(a,y),null)),a._finishPromise}function ln(t){return new TypeError(`TransformStreamDefaultController.prototype.${t} can only be used on a TransformStreamDefaultController`)}function Bs(t){t._finishPromise_resolve!==void 0&&(t._finishPromise_resolve(),t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0)}function Dt(t,s){t._finishPromise_reject!==void 0&&(C(t._finishPromise),t._finishPromise_reject(s),t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0)}function zi(t){return new TypeError(`TransformStream.prototype.${t} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=tn,r.CountQueuingStrategy=rn,r.ReadableByteStreamController=Be,r.ReadableStream=Y,r.ReadableStreamBYOBReader=Ke,r.ReadableStreamBYOBRequest=it,r.ReadableStreamDefaultController=De,r.ReadableStreamDefaultReader=He,r.TransformStream=nn,r.TransformStreamDefaultController=Xe,r.WritableStream=Qe,r.WritableStreamDefaultController=At,r.WritableStreamDefaultWriter=Le})});var Ki=M(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:e}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=e}catch(n){throw r.emitWarning=e,n}}catch{Object.assign(globalThis,Yi())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(n){let o=0,i=this;return new ReadableStream({type:"bytes",async pull(l){let p=await i.slice(o,Math.min(i.size,o+65536)).arrayBuffer();o+=p.byteLength,l.enqueue(new Uint8Array(p)),o===i.size&&l.close()}})})}catch{}});async function*Is(r,e=!0){for(let n of r)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(e){let o=n.byteOffset,i=n.byteOffset+n.byteLength;for(;o!==i;){let l=Math.min(i-o,Qi),f=n.buffer.slice(o,o+l);o+=f.byteLength,yield new Uint8Array(f)}}else yield n;else{let o=0,i=n;for(;o!==i.size;){let f=await i.slice(o,Math.min(i.size,o+Qi)).arrayBuffer();o+=f.byteLength,yield new Uint8Array(f)}}}var fp,Qi,Ji,cf,Ne,hr=dr(()=>{fp=$(Ki(),1);Qi=65536;Ji=class Fs{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],n={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let o=new TextEncoder;for(let l of e){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof Fs?f=l:f=o.encode(`${l}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${n.endings===void 0?"transparent":n.endings}`;let i=n.type===void 0?"":String(n.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,n="";for await(let o of Is(this.#e,!1))n+=e.decode(o,{stream:!0});return n+=e.decode(),n}async arrayBuffer(){let e=new Uint8Array(this.size),n=0;for await(let o of Is(this.#e,!1))e.set(o,n),n+=o.length;return e.buffer}stream(){let e=Is(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let o=await e.next();o.done?n.close():n.enqueue(o.value)},async cancel(){await e.return()}})}slice(e=0,n=this.size,o=""){let{size:i}=this,l=e<0?Math.max(i+e,0):Math.min(e,i),f=n<0?Math.max(i+n,0):Math.min(n,i),p=Math.max(f-l,0),m=this.#e,c=[],d=0;for(let S of m){if(d>=p)break;let R=ArrayBuffer.isView(S)?S.byteLength:S.size;if(l&&R<=l)l-=R,f-=R;else{let g;ArrayBuffer.isView(S)?(g=S.subarray(l,Math.min(R,f)),d+=g.byteLength):(g=S.slice(l,Math.min(R,f)),d+=g.size),f-=R,c.push(g),l=0}}let b=new Fs([],{type:String(o).toLowerCase()});return b.#r=p,b.#e=c,b}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(Ji.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});cf=Ji,Ne=cf});var ff,df,qt,Ns=dr(()=>{hr();ff=class extends Ne{#e=0;#t="";constructor(e,n,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,o),o===null&&(o={});let i=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(n)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Ne&&/^(File)$/.test(e[Symbol.toStringTag])}},df=ff,qt=df});function ea(r,e=Ne){var n=`${Zi()}${Zi()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],i=`--${n}\r
Content-Disposition: form-data; name="`;return r.forEach((l,f)=>typeof l=="string"?o.push(i+Ws(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):o.push(i+Ws(f)+`"; filename="${Ws(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),o.push(`--${n}--`),new e(o,{type:"multipart/form-data; boundary="+n})}var pr,hf,pf,Zi,mf,Xi,Ws,pt,mt,fn=dr(()=>{hr();Ns();({toStringTag:pr,iterator:hf,hasInstance:pf}=Symbol),Zi=Math.random,mf="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Xi=(r,e,n)=>(r+="",/^(Blob|File)$/.test(e&&e[pr])?[(n=n!==void 0?n+"":e[pr]=="File"?e.name:"blob",r),e.name!==n||e[pr]=="blob"?new qt([e],n,e):e]:[r,e+""]),Ws=(r,e)=>(e?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),pt=(r,e,n)=>{if(e.length<n)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${n} arguments required, but only ${e.length} present.`)},mt=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[pr](){return"FormData"}[hf](){return this.entries()}static[pf](e){return e&&typeof e=="object"&&e[pr]==="FormData"&&!mf.some(n=>typeof e[n]!="function")}append(...e){pt("append",arguments,2),this.#e.push(Xi(...e))}delete(e){pt("delete",arguments,1),e+="",this.#e=this.#e.filter(([n])=>n!==e)}get(e){pt("get",arguments,1),e+="";for(var n=this.#e,o=n.length,i=0;i<o;i++)if(n[i][0]===e)return n[i][1];return null}getAll(e,n){return pt("getAll",arguments,1),n=[],e+="",this.#e.forEach(o=>o[0]===e&&n.push(o[1])),n}has(e){return pt("has",arguments,1),e+="",this.#e.some(n=>n[0]===e)}forEach(e,n){pt("forEach",arguments,1);for(var[o,i]of this)e.call(n,i,o,this)}set(...e){pt("set",arguments,2);var n=[],o=!0;e=Xi(...e),this.#e.forEach(i=>{i[0]===e[0]?o&&(o=!n.push(e)):n.push(i)}),o&&n.push(e),this.#e=n}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var oa=M((Rp,sa)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),e=new r().port1,n=new ArrayBuffer;e.postMessage(n,[n,n])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}sa.exports=globalThis.DOMException});var hn,yf,Pp,Ms=dr(()=>{hn=require("node:fs"),yf=$(oa(),1);Ns();hr();({stat:Pp}=hn.promises)});var aa={};af(aa,{toFormData:()=>Cf});function Ef(r){let e=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let n=e[2]||e[3]||"",o=n.slice(n.lastIndexOf("\\")+1);return o=o.replace(/%22/g,'"'),o=o.replace(/&#(\d{4});/g,(i,l)=>String.fromCharCode(l)),o}async function Cf(r,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let n=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let o=new Us(n[1]||n[2]),i,l,f,p,m,c,d=[],b=new mt,S=v=>{f+=C.decode(v,{stream:!0})},R=v=>{d.push(v)},g=()=>{let v=new qt(d,c,{type:m});b.append(p,v)},w=()=>{b.append(p,f)},C=new TextDecoder("utf-8");C.decode(),o.onPartBegin=function(){o.onPartData=S,o.onPartEnd=w,i="",l="",f="",p="",m="",c=null,d.length=0},o.onHeaderField=function(v){i+=C.decode(v,{stream:!0})},o.onHeaderValue=function(v){l+=C.decode(v,{stream:!0})},o.onHeaderEnd=function(){if(l+=C.decode(),i=i.toLowerCase(),i==="content-disposition"){let v=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(p=v[2]||v[3]||""),c=Ef(l),c&&(o.onPartData=R,o.onPartEnd=g)}else i==="content-type"&&(m=l);l="",i=""};for await(let v of r)o.write(v);return o.end(),b}var Re,q,ia,tt,pn,mn,_f,yr,bf,gf,Sf,wf,yt,Us,la=dr(()=>{Ms();fn();Re=0,q={START_BOUNDARY:Re++,HEADER_FIELD_START:Re++,HEADER_FIELD:Re++,HEADER_VALUE_START:Re++,HEADER_VALUE:Re++,HEADER_VALUE_ALMOST_DONE:Re++,HEADERS_ALMOST_DONE:Re++,PART_DATA_START:Re++,PART_DATA:Re++,END:Re++},ia=1,tt={PART_BOUNDARY:ia,LAST_BOUNDARY:ia*=2},pn=10,mn=13,_f=32,yr=45,bf=58,gf=97,Sf=122,wf=r=>r|32,yt=()=>{},Us=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=yt,this.onHeaderField=yt,this.onHeadersEnd=yt,this.onHeaderValue=yt,this.onPartBegin=yt,this.onPartData=yt,this.onPartEnd=yt,this.boundaryChars={},e=`\r
--`+e;let n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o),this.boundaryChars[n[o]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=q.START_BOUNDARY}write(e){let n=0,o=e.length,i=this.index,{lookbehind:l,boundary:f,boundaryChars:p,index:m,state:c,flags:d}=this,b=this.boundary.length,S=b-1,R=e.length,g,w,C=k=>{this[k+"Mark"]=n},v=k=>{delete this[k+"Mark"]},A=(k,B,I,j)=>{(B===void 0||B!==I)&&this[k](j&&j.subarray(B,I))},F=(k,B)=>{let I=k+"Mark";I in this&&(B?(A(k,this[I],n,e),delete this[I]):(A(k,this[I],e.length,e),this[I]=0))};for(n=0;n<o;n++)switch(g=e[n],c){case q.START_BOUNDARY:if(m===f.length-2){if(g===yr)d|=tt.LAST_BOUNDARY;else if(g!==mn)return;m++;break}else if(m-1===f.length-2){if(d&tt.LAST_BOUNDARY&&g===yr)c=q.END,d=0;else if(!(d&tt.LAST_BOUNDARY)&&g===pn)m=0,A("onPartBegin"),c=q.HEADER_FIELD_START;else return;break}g!==f[m+2]&&(m=-2),g===f[m+2]&&m++;break;case q.HEADER_FIELD_START:c=q.HEADER_FIELD,C("onHeaderField"),m=0;case q.HEADER_FIELD:if(g===mn){v("onHeaderField"),c=q.HEADERS_ALMOST_DONE;break}if(m++,g===yr)break;if(g===bf){if(m===1)return;F("onHeaderField",!0),c=q.HEADER_VALUE_START;break}if(w=wf(g),w<gf||w>Sf)return;break;case q.HEADER_VALUE_START:if(g===_f)break;C("onHeaderValue"),c=q.HEADER_VALUE;case q.HEADER_VALUE:g===mn&&(F("onHeaderValue",!0),A("onHeaderEnd"),c=q.HEADER_VALUE_ALMOST_DONE);break;case q.HEADER_VALUE_ALMOST_DONE:if(g!==pn)return;c=q.HEADER_FIELD_START;break;case q.HEADERS_ALMOST_DONE:if(g!==pn)return;A("onHeadersEnd"),c=q.PART_DATA_START;break;case q.PART_DATA_START:c=q.PART_DATA,C("onPartData");case q.PART_DATA:if(i=m,m===0){for(n+=S;n<R&&!(e[n]in p);)n+=b;n-=S,g=e[n]}if(m<f.length)f[m]===g?(m===0&&F("onPartData",!0),m++):m=0;else if(m===f.length)m++,g===mn?d|=tt.PART_BOUNDARY:g===yr?d|=tt.LAST_BOUNDARY:m=0;else if(m-1===f.length)if(d&tt.PART_BOUNDARY){if(m=0,g===pn){d&=~tt.PART_BOUNDARY,A("onPartEnd"),A("onPartBegin"),c=q.HEADER_FIELD_START;break}}else d&tt.LAST_BOUNDARY&&g===yr?(A("onPartEnd"),c=q.END,d=0):m=0;if(m>0)l[m-1]=g;else if(i>0){let k=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);A("onPartData",0,i,k),i=0,C("onPartData"),n--}break;case q.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}F("onHeaderField"),F("onHeaderValue"),F("onPartData"),this.index=m,this.state=c,this.flags=d}end(){if(this.state===q.HEADER_FIELD_START&&this.index===0||this.state===q.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==q.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Me=M((bm,xa)=>{"use strict";var va=["nodebuffer","arraybuffer","fragments"],Pa=typeof Blob<"u";Pa&&va.push("blob");xa.exports={BINARY_TYPES:va,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:Pa,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Sr=M((gm,wn)=>{"use strict";var{EMPTY_BUFFER:Af}=Me(),Hs=Buffer[Symbol.species];function Bf(r,e){if(r.length===0)return Af;if(r.length===1)return r[0];let n=Buffer.allocUnsafe(e),o=0;for(let i=0;i<r.length;i++){let l=r[i];n.set(l,o),o+=l.length}return o<e?new Hs(n.buffer,n.byteOffset,o):n}function ka(r,e,n,o,i){for(let l=0;l<i;l++)n[o+l]=r[l]^e[l&3]}function Oa(r,e){for(let n=0;n<r.length;n++)r[n]^=e[n&3]}function Lf(r){return r.length===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.length)}function Vs(r){if(Vs.readOnly=!0,Buffer.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=new Hs(r):ArrayBuffer.isView(r)?e=new Hs(r.buffer,r.byteOffset,r.byteLength):(e=Buffer.from(r),Vs.readOnly=!1),e}wn.exports={concat:Bf,mask:ka,toArrayBuffer:Lf,toBuffer:Vs,unmask:Oa};if(!process.env.WS_NO_BUFFER_UTIL)try{let r=require("bufferutil");wn.exports.mask=function(e,n,o,i,l){l<48?ka(e,n,o,i,l):r.mask(e,n,o,i,l)},wn.exports.unmask=function(e,n){e.length<32?Oa(e,n):r.unmask(e,n)}}catch{}});var La=M((Sm,Ba)=>{"use strict";var Aa=Symbol("kDone"),Gs=Symbol("kRun"),Ys=class{constructor(e){this[Aa]=()=>{this.pending--,this[Gs]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Gs]()}[Gs](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[Aa])}}};Ba.exports=Ys});var Cr=M((wm,Na)=>{"use strict";var wr=require("zlib"),Da=Sr(),Df=La(),{kStatusCode:Ia}=Me(),If=Buffer[Symbol.species],Ff=Buffer.from([0,0,255,255]),Rn=Symbol("permessage-deflate"),Ue=Symbol("total-length"),Er=Symbol("callback"),rt=Symbol("buffers"),Cn=Symbol("error"),En,Ks=class{constructor(e,n,o){if(this._maxPayload=o|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!n,this._deflate=null,this._inflate=null,this.params=null,!En){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;En=new Df(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Er];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let n=this._options,o=e.find(i=>!(n.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(n.serverMaxWindowBits===!1||typeof n.serverMaxWindowBits=="number"&&n.serverMaxWindowBits>i.server_max_window_bits)||typeof n.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!o)throw new Error("None of the extension offers can be accepted");return n.serverNoContextTakeover&&(o.server_no_context_takeover=!0),n.clientNoContextTakeover&&(o.client_no_context_takeover=!0),typeof n.serverMaxWindowBits=="number"&&(o.server_max_window_bits=n.serverMaxWindowBits),typeof n.clientMaxWindowBits=="number"?o.client_max_window_bits=n.clientMaxWindowBits:(o.client_max_window_bits===!0||n.clientMaxWindowBits===!1)&&delete o.client_max_window_bits,o}acceptAsClient(e){let n=e[0];if(this._options.clientNoContextTakeover===!1&&n.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!n.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(n.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&n.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return n}normalizeParams(e){return e.forEach(n=>{Object.keys(n).forEach(o=>{let i=n[o];if(i.length>1)throw new Error(`Parameter "${o}" must have only a single value`);if(i=i[0],o==="client_max_window_bits"){if(i!==!0){let l=+i;if(!Number.isInteger(l)||l<8||l>15)throw new TypeError(`Invalid value for parameter "${o}": ${i}`);i=l}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${o}": ${i}`)}else if(o==="server_max_window_bits"){let l=+i;if(!Number.isInteger(l)||l<8||l>15)throw new TypeError(`Invalid value for parameter "${o}": ${i}`);i=l}else if(o==="client_no_context_takeover"||o==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${o}": ${i}`)}else throw new Error(`Unknown parameter "${o}"`);n[o]=i})}),e}decompress(e,n,o){En.add(i=>{this._decompress(e,n,(l,f)=>{i(),o(l,f)})})}compress(e,n,o){En.add(i=>{this._compress(e,n,(l,f)=>{i(),o(l,f)})})}_decompress(e,n,o){let i=this._isServer?"client":"server";if(!this._inflate){let l=`${i}_max_window_bits`,f=typeof this.params[l]!="number"?wr.Z_DEFAULT_WINDOWBITS:this.params[l];this._inflate=wr.createInflateRaw({...this._options.zlibInflateOptions,windowBits:f}),this._inflate[Rn]=this,this._inflate[Ue]=0,this._inflate[rt]=[],this._inflate.on("error",Wf),this._inflate.on("data",Fa)}this._inflate[Er]=o,this._inflate.write(e),n&&this._inflate.write(Ff),this._inflate.flush(()=>{let l=this._inflate[Cn];if(l){this._inflate.close(),this._inflate=null,o(l);return}let f=Da.concat(this._inflate[rt],this._inflate[Ue]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Ue]=0,this._inflate[rt]=[],n&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),o(null,f)})}_compress(e,n,o){let i=this._isServer?"server":"client";if(!this._deflate){let l=`${i}_max_window_bits`,f=typeof this.params[l]!="number"?wr.Z_DEFAULT_WINDOWBITS:this.params[l];this._deflate=wr.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:f}),this._deflate[Ue]=0,this._deflate[rt]=[],this._deflate.on("data",Nf)}this._deflate[Er]=o,this._deflate.write(e),this._deflate.flush(wr.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let l=Da.concat(this._deflate[rt],this._deflate[Ue]);n&&(l=new If(l.buffer,l.byteOffset,l.length-4)),this._deflate[Er]=null,this._deflate[Ue]=0,this._deflate[rt]=[],n&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),o(null,l)})}};Na.exports=Ks;function Nf(r){this[rt].push(r),this[Ue]+=r.length}function Fa(r){if(this[Ue]+=r.length,this[Rn]._maxPayload<1||this[Ue]<=this[Rn]._maxPayload){this[rt].push(r);return}this[Cn]=new RangeError("Max payload size exceeded"),this[Cn].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Cn][Ia]=1009,this.removeListener("data",Fa),this.reset()}function Wf(r){this[Rn]._inflate=null,r[Ia]=1007,this[Er](r)}});var jt=M((Em,Tn)=>{"use strict";var{isUtf8:Wa}=require("buffer"),{hasBlob:qf}=Me(),Mf=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function Uf(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function Qs(r){let e=r.length,n=0;for(;n<e;)if((r[n]&128)===0)n++;else if((r[n]&224)===192){if(n+1===e||(r[n+1]&192)!==128||(r[n]&254)===192)return!1;n+=2}else if((r[n]&240)===224){if(n+2>=e||(r[n+1]&192)!==128||(r[n+2]&192)!==128||r[n]===224&&(r[n+1]&224)===128||r[n]===237&&(r[n+1]&224)===160)return!1;n+=3}else if((r[n]&248)===240){if(n+3>=e||(r[n+1]&192)!==128||(r[n+2]&192)!==128||(r[n+3]&192)!==128||r[n]===240&&(r[n+1]&240)===128||r[n]===244&&r[n+1]>143||r[n]>244)return!1;n+=4}else return!1;return!0}function jf(r){return qf&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&(r[Symbol.toStringTag]==="Blob"||r[Symbol.toStringTag]==="File")}Tn.exports={isBlob:jf,isValidStatusCode:Uf,isValidUTF8:Qs,tokenChars:Mf};if(Wa)Tn.exports.isValidUTF8=function(r){return r.length<24?Qs(r):Wa(r)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let r=require("utf-8-validate");Tn.exports.isValidUTF8=function(e){return e.length<32?Qs(e):r(e)}}catch{}});var to=M((Cm,Ha)=>{"use strict";var{Writable:$f}=require("stream"),qa=Cr(),{BINARY_TYPES:zf,EMPTY_BUFFER:Ma,kStatusCode:Hf,kWebSocket:Vf}=Me(),{concat:Js,toArrayBuffer:Gf,unmask:Yf}=Sr(),{isValidStatusCode:Kf,isValidUTF8:Ua}=jt(),vn=Buffer[Symbol.species],de=0,ja=1,$a=2,za=3,Zs=4,Xs=5,Pn=6,eo=class extends $f{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||zf[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Vf]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=de}_write(e,n,o){if(this._opcode===8&&this._state==de)return o();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(o)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let o=this._buffers[0];return this._buffers[0]=new vn(o.buffer,o.byteOffset+e,o.length-e),new vn(o.buffer,o.byteOffset,e)}let n=Buffer.allocUnsafe(e);do{let o=this._buffers[0],i=n.length-e;e>=o.length?n.set(this._buffers.shift(),i):(n.set(new Uint8Array(o.buffer,o.byteOffset,e),i),this._buffers[0]=new vn(o.buffer,o.byteOffset+e,o.length-e)),e-=o.length}while(e>0);return n}startLoop(e){this._loop=!0;do switch(this._state){case de:this.getInfo(e);break;case ja:this.getPayloadLength16(e);break;case $a:this.getPayloadLength64(e);break;case za:this.getMask();break;case Zs:this.getData(e);break;case Xs:case Pn:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let n=this.consume(2);if((n[0]&48)!==0){let i=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(i);return}let o=(n[0]&64)===64;if(o&&!this._extensions[qa.extensionName]){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._fin=(n[0]&128)===128,this._opcode=n[0]&15,this._payloadLength=n[1]&127,this._opcode===0){if(o){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(!this._fragmented){let i=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._compressed=o}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let i=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(i);return}if(o){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let i=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(i);return}}else{let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(n[1]&128)===128,this._isServer){if(!this._masked){let i=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(i);return}}else if(this._masked){let i=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(i);return}this._payloadLength===126?this._state=ja:this._payloadLength===127?this._state=$a:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let n=this.consume(8),o=n.readUInt32BE(0);if(o>Math.pow(2,21)-1){let i=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(i);return}this._payloadLength=o*Math.pow(2,32)+n.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let n=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(n);return}this._masked?this._state=za:this._state=Zs}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Zs}getData(e){let n=Ma;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}n=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&Yf(n,this._mask)}if(this._opcode>7){this.controlMessage(n,e);return}if(this._compressed){this._state=Xs,this.decompress(n,e);return}n.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(n)),this.dataMessage(e)}decompress(e,n){this._extensions[qa.extensionName].decompress(e,this._fin,(i,l)=>{if(i)return n(i);if(l.length){if(this._messageLength+=l.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let f=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");n(f);return}this._fragments.push(l)}this.dataMessage(n),this._state===de&&this.startLoop(n)})}dataMessage(e){if(!this._fin){this._state=de;return}let n=this._messageLength,o=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=Js(o,n):this._binaryType==="arraybuffer"?i=Gf(Js(o,n)):this._binaryType==="blob"?i=new Blob(o):i=o,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=de):(this._state=Pn,setImmediate(()=>{this.emit("message",i,!0),this._state=de,this.startLoop(e)}))}else{let i=Js(o,n);if(!this._skipUTF8Validation&&!Ua(i)){let l=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(l);return}this._state===Xs||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=de):(this._state=Pn,setImmediate(()=>{this.emit("message",i,!1),this._state=de,this.startLoop(e)}))}}controlMessage(e,n){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,Ma),this.end();else{let o=e.readUInt16BE(0);if(!Kf(o)){let l=this.createError(RangeError,`invalid status code ${o}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");n(l);return}let i=new vn(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!Ua(i)){let l=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");n(l);return}this._loop=!1,this.emit("conclude",o,i),this.end()}this._state=de;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=de):(this._state=Pn,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=de,this.startLoop(n)}))}createError(e,n,o,i,l){this._loop=!1,this._errored=!0;let f=new e(o?`Invalid WebSocket frame: ${n}`:n);return Error.captureStackTrace(f,this.createError),f.code=l,f[Hf]=i,f}};Ha.exports=eo});var so=M((Tm,Ya)=>{"use strict";var{Duplex:Rm}=require("stream"),{randomFillSync:Qf}=require("crypto"),Va=Cr(),{EMPTY_BUFFER:Jf,kWebSocket:Zf,NOOP:Xf}=Me(),{isBlob:$t,isValidStatusCode:ed}=jt(),{mask:Ga,toBuffer:gt}=Sr(),he=Symbol("kByteLength"),td=Buffer.alloc(4),xn=8*1024,St,zt=xn,we=0,rd=1,nd=2,ro=class r{constructor(e,n,o){this._extensions=n||{},o&&(this._generateMask=o,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=we,this.onerror=Xf,this[Zf]=void 0}static frame(e,n){let o,i=!1,l=2,f=!1;n.mask&&(o=n.maskBuffer||td,n.generateMask?n.generateMask(o):(zt===xn&&(St===void 0&&(St=Buffer.alloc(xn)),Qf(St,0,xn),zt=0),o[0]=St[zt++],o[1]=St[zt++],o[2]=St[zt++],o[3]=St[zt++]),f=(o[0]|o[1]|o[2]|o[3])===0,l=6);let p;typeof e=="string"?(!n.mask||f)&&n[he]!==void 0?p=n[he]:(e=Buffer.from(e),p=e.length):(p=e.length,i=n.mask&&n.readOnly&&!f);let m=p;p>=65536?(l+=8,m=127):p>125&&(l+=2,m=126);let c=Buffer.allocUnsafe(i?p+l:l);return c[0]=n.fin?n.opcode|128:n.opcode,n.rsv1&&(c[0]|=64),c[1]=m,m===126?c.writeUInt16BE(p,2):m===127&&(c[2]=c[3]=0,c.writeUIntBE(p,4,6)),n.mask?(c[1]|=128,c[l-4]=o[0],c[l-3]=o[1],c[l-2]=o[2],c[l-1]=o[3],f?[c,e]:i?(Ga(e,o,c,l,p),[c]):(Ga(e,o,e,0,p),[c,e])):[c,e]}close(e,n,o,i){let l;if(e===void 0)l=Jf;else{if(typeof e!="number"||!ed(e))throw new TypeError("First argument must be a valid error code number");if(n===void 0||!n.length)l=Buffer.allocUnsafe(2),l.writeUInt16BE(e,0);else{let p=Buffer.byteLength(n);if(p>123)throw new RangeError("The message must not be greater than 123 bytes");l=Buffer.allocUnsafe(2+p),l.writeUInt16BE(e,0),typeof n=="string"?l.write(n,2):l.set(n,2)}}let f={[he]:l.length,fin:!0,generateMask:this._generateMask,mask:o,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==we?this.enqueue([this.dispatch,l,!1,f,i]):this.sendFrame(r.frame(l,f),i)}ping(e,n,o){let i,l;if(typeof e=="string"?(i=Buffer.byteLength(e),l=!1):$t(e)?(i=e.size,l=!1):(e=gt(e),i=e.length,l=gt.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let f={[he]:i,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:9,readOnly:l,rsv1:!1};$t(e)?this._state!==we?this.enqueue([this.getBlobData,e,!1,f,o]):this.getBlobData(e,!1,f,o):this._state!==we?this.enqueue([this.dispatch,e,!1,f,o]):this.sendFrame(r.frame(e,f),o)}pong(e,n,o){let i,l;if(typeof e=="string"?(i=Buffer.byteLength(e),l=!1):$t(e)?(i=e.size,l=!1):(e=gt(e),i=e.length,l=gt.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let f={[he]:i,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:10,readOnly:l,rsv1:!1};$t(e)?this._state!==we?this.enqueue([this.getBlobData,e,!1,f,o]):this.getBlobData(e,!1,f,o):this._state!==we?this.enqueue([this.dispatch,e,!1,f,o]):this.sendFrame(r.frame(e,f),o)}send(e,n,o){let i=this._extensions[Va.extensionName],l=n.binary?2:1,f=n.compress,p,m;typeof e=="string"?(p=Buffer.byteLength(e),m=!1):$t(e)?(p=e.size,m=!1):(e=gt(e),p=e.length,m=gt.readOnly),this._firstFragment?(this._firstFragment=!1,f&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(f=p>=i._threshold),this._compress=f):(f=!1,l=0),n.fin&&(this._firstFragment=!0);let c={[he]:p,fin:n.fin,generateMask:this._generateMask,mask:n.mask,maskBuffer:this._maskBuffer,opcode:l,readOnly:m,rsv1:f};$t(e)?this._state!==we?this.enqueue([this.getBlobData,e,this._compress,c,o]):this.getBlobData(e,this._compress,c,o):this._state!==we?this.enqueue([this.dispatch,e,this._compress,c,o]):this.dispatch(e,this._compress,c,o)}getBlobData(e,n,o,i){this._bufferedBytes+=o[he],this._state=nd,e.arrayBuffer().then(l=>{if(this._socket.destroyed){let p=new Error("The socket was closed while the blob was being read");process.nextTick(no,this,p,i);return}this._bufferedBytes-=o[he];let f=gt(l);n?this.dispatch(f,n,o,i):(this._state=we,this.sendFrame(r.frame(f,o),i),this.dequeue())}).catch(l=>{process.nextTick(sd,this,l,i)})}dispatch(e,n,o,i){if(!n){this.sendFrame(r.frame(e,o),i);return}let l=this._extensions[Va.extensionName];this._bufferedBytes+=o[he],this._state=rd,l.compress(e,o.fin,(f,p)=>{if(this._socket.destroyed){let m=new Error("The socket was closed while data was being compressed");no(this,m,i);return}this._bufferedBytes-=o[he],this._state=we,o.readOnly=!1,this.sendFrame(r.frame(p,o),i),this.dequeue()})}dequeue(){for(;this._state===we&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][he],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][he],this._queue.push(e)}sendFrame(e,n){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],n),this._socket.uncork()):this._socket.write(e[0],n)}};Ya.exports=ro;function no(r,e,n){typeof n=="function"&&n(e);for(let o=0;o<r._queue.length;o++){let i=r._queue[o],l=i[i.length-1];typeof l=="function"&&l(e)}}function sd(r,e,n){no(r,e,n),r.onerror(e)}});var nl=M((vm,rl)=>{"use strict";var{kForOnEventAttribute:Rr,kListener:oo}=Me(),Ka=Symbol("kCode"),Qa=Symbol("kData"),Ja=Symbol("kError"),Za=Symbol("kMessage"),Xa=Symbol("kReason"),Ht=Symbol("kTarget"),el=Symbol("kType"),tl=Symbol("kWasClean"),je=class{constructor(e){this[Ht]=null,this[el]=e}get target(){return this[Ht]}get type(){return this[el]}};Object.defineProperty(je.prototype,"target",{enumerable:!0});Object.defineProperty(je.prototype,"type",{enumerable:!0});var wt=class extends je{constructor(e,n={}){super(e),this[Ka]=n.code===void 0?0:n.code,this[Xa]=n.reason===void 0?"":n.reason,this[tl]=n.wasClean===void 0?!1:n.wasClean}get code(){return this[Ka]}get reason(){return this[Xa]}get wasClean(){return this[tl]}};Object.defineProperty(wt.prototype,"code",{enumerable:!0});Object.defineProperty(wt.prototype,"reason",{enumerable:!0});Object.defineProperty(wt.prototype,"wasClean",{enumerable:!0});var Vt=class extends je{constructor(e,n={}){super(e),this[Ja]=n.error===void 0?null:n.error,this[Za]=n.message===void 0?"":n.message}get error(){return this[Ja]}get message(){return this[Za]}};Object.defineProperty(Vt.prototype,"error",{enumerable:!0});Object.defineProperty(Vt.prototype,"message",{enumerable:!0});var Tr=class extends je{constructor(e,n={}){super(e),this[Qa]=n.data===void 0?null:n.data}get data(){return this[Qa]}};Object.defineProperty(Tr.prototype,"data",{enumerable:!0});var od={addEventListener(r,e,n={}){for(let i of this.listeners(r))if(!n[Rr]&&i[oo]===e&&!i[Rr])return;let o;if(r==="message")o=function(l,f){let p=new Tr("message",{data:f?l:l.toString()});p[Ht]=this,kn(e,this,p)};else if(r==="close")o=function(l,f){let p=new wt("close",{code:l,reason:f.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});p[Ht]=this,kn(e,this,p)};else if(r==="error")o=function(l){let f=new Vt("error",{error:l,message:l.message});f[Ht]=this,kn(e,this,f)};else if(r==="open")o=function(){let l=new je("open");l[Ht]=this,kn(e,this,l)};else return;o[Rr]=!!n[Rr],o[oo]=e,n.once?this.once(r,o):this.on(r,o)},removeEventListener(r,e){for(let n of this.listeners(r))if(n[oo]===e&&!n[Rr]){this.removeListener(r,n);break}}};rl.exports={CloseEvent:wt,ErrorEvent:Vt,Event:je,EventTarget:od,MessageEvent:Tr};function kn(r,e,n){typeof r=="object"&&r.handleEvent?r.handleEvent.call(r,n):r.call(e,n)}});var io=M((Pm,sl)=>{"use strict";var{tokenChars:vr}=jt();function ve(r,e,n){r[e]===void 0?r[e]=[n]:r[e].push(n)}function id(r){let e=Object.create(null),n=Object.create(null),o=!1,i=!1,l=!1,f,p,m=-1,c=-1,d=-1,b=0;for(;b<r.length;b++)if(c=r.charCodeAt(b),f===void 0)if(d===-1&&vr[c]===1)m===-1&&(m=b);else if(b!==0&&(c===32||c===9))d===-1&&m!==-1&&(d=b);else if(c===59||c===44){if(m===-1)throw new SyntaxError(`Unexpected character at index ${b}`);d===-1&&(d=b);let R=r.slice(m,d);c===44?(ve(e,R,n),n=Object.create(null)):f=R,m=d=-1}else throw new SyntaxError(`Unexpected character at index ${b}`);else if(p===void 0)if(d===-1&&vr[c]===1)m===-1&&(m=b);else if(c===32||c===9)d===-1&&m!==-1&&(d=b);else if(c===59||c===44){if(m===-1)throw new SyntaxError(`Unexpected character at index ${b}`);d===-1&&(d=b),ve(n,r.slice(m,d),!0),c===44&&(ve(e,f,n),n=Object.create(null),f=void 0),m=d=-1}else if(c===61&&m!==-1&&d===-1)p=r.slice(m,b),m=d=-1;else throw new SyntaxError(`Unexpected character at index ${b}`);else if(i){if(vr[c]!==1)throw new SyntaxError(`Unexpected character at index ${b}`);m===-1?m=b:o||(o=!0),i=!1}else if(l)if(vr[c]===1)m===-1&&(m=b);else if(c===34&&m!==-1)l=!1,d=b;else if(c===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${b}`);else if(c===34&&r.charCodeAt(b-1)===61)l=!0;else if(d===-1&&vr[c]===1)m===-1&&(m=b);else if(m!==-1&&(c===32||c===9))d===-1&&(d=b);else if(c===59||c===44){if(m===-1)throw new SyntaxError(`Unexpected character at index ${b}`);d===-1&&(d=b);let R=r.slice(m,d);o&&(R=R.replace(/\\/g,""),o=!1),ve(n,p,R),c===44&&(ve(e,f,n),n=Object.create(null),f=void 0),p=void 0,m=d=-1}else throw new SyntaxError(`Unexpected character at index ${b}`);if(m===-1||l||c===32||c===9)throw new SyntaxError("Unexpected end of input");d===-1&&(d=b);let S=r.slice(m,d);return f===void 0?ve(e,S,n):(p===void 0?ve(n,S,!0):o?ve(n,p,S.replace(/\\/g,"")):ve(n,p,S),ve(e,f,n)),e}function ad(r){return Object.keys(r).map(e=>{let n=r[e];return Array.isArray(n)||(n=[n]),n.map(o=>[e].concat(Object.keys(o).map(i=>{let l=o[i];return Array.isArray(l)||(l=[l]),l.map(f=>f===!0?i:`${i}=${f}`).join("; ")})).join("; ")).join(", ")}).join(", ")}sl.exports={format:ad,parse:id}});var Ln=M((Om,yl)=>{"use strict";var ld=require("events"),ud=require("https"),cd=require("http"),al=require("net"),fd=require("tls"),{randomBytes:dd,createHash:hd}=require("crypto"),{Duplex:xm,Readable:km}=require("stream"),{URL:ao}=require("url"),nt=Cr(),pd=to(),md=so(),{isBlob:yd}=jt(),{BINARY_TYPES:ol,EMPTY_BUFFER:On,GUID:_d,kForOnEventAttribute:lo,kListener:bd,kStatusCode:gd,kWebSocket:H,NOOP:ll}=Me(),{EventTarget:{addEventListener:Sd,removeEventListener:wd}}=nl(),{format:Ed,parse:Cd}=io(),{toBuffer:Rd}=Sr(),Td=30*1e3,ul=Symbol("kAborted"),uo=[8,13],$e=["CONNECTING","OPEN","CLOSING","CLOSED"],vd=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,U=class r extends ld{constructor(e,n,o){super(),this._binaryType=ol[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=On,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=r.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,n===void 0?n=[]:Array.isArray(n)||(typeof n=="object"&&n!==null?(o=n,n=[]):n=[n]),cl(this,e,n,o)):(this._autoPong=o.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){ol.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,n,o){let i=new pd({allowSynchronousEvents:o.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation}),l=new md(e,this._extensions,o.generateMask);this._receiver=i,this._sender=l,this._socket=e,i[H]=this,l[H]=this,e[H]=this,i.on("conclude",kd),i.on("drain",Od),i.on("error",Ad),i.on("message",Bd),i.on("ping",Ld),i.on("pong",Dd),l.onerror=Id,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),n.length>0&&e.unshift(n),e.on("close",hl),e.on("data",Bn),e.on("end",pl),e.on("error",ml),this._readyState=r.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[nt.extensionName]&&this._extensions[nt.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,n){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){se(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===r.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=r.CLOSING,this._sender.close(e,n,!this._isServer,o=>{o||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),dl(this)}}pause(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,n,o){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(o=e,e=n=void 0):typeof n=="function"&&(o=n,n=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){co(this,e,o);return}n===void 0&&(n=!this._isServer),this._sender.ping(e||On,n,o)}pong(e,n,o){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(o=e,e=n=void 0):typeof n=="function"&&(o=n,n=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){co(this,e,o);return}n===void 0&&(n=!this._isServer),this._sender.pong(e||On,n,o)}resume(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,n,o){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof n=="function"&&(o=n,n={}),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){co(this,e,o);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...n};this._extensions[nt.extensionName]||(i.compress=!1),this._sender.send(e||On,i,o)}terminate(){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){se(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=r.CLOSING,this._socket.destroy())}}};Object.defineProperty(U,"CONNECTING",{enumerable:!0,value:$e.indexOf("CONNECTING")});Object.defineProperty(U.prototype,"CONNECTING",{enumerable:!0,value:$e.indexOf("CONNECTING")});Object.defineProperty(U,"OPEN",{enumerable:!0,value:$e.indexOf("OPEN")});Object.defineProperty(U.prototype,"OPEN",{enumerable:!0,value:$e.indexOf("OPEN")});Object.defineProperty(U,"CLOSING",{enumerable:!0,value:$e.indexOf("CLOSING")});Object.defineProperty(U.prototype,"CLOSING",{enumerable:!0,value:$e.indexOf("CLOSING")});Object.defineProperty(U,"CLOSED",{enumerable:!0,value:$e.indexOf("CLOSED")});Object.defineProperty(U.prototype,"CLOSED",{enumerable:!0,value:$e.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(U.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(U.prototype,`on${r}`,{enumerable:!0,get(){for(let e of this.listeners(r))if(e[lo])return e[bd];return null},set(e){for(let n of this.listeners(r))if(n[lo]){this.removeListener(r,n);break}typeof e=="function"&&this.addEventListener(r,e,{[lo]:!0})}})});U.prototype.addEventListener=Sd;U.prototype.removeEventListener=wd;yl.exports=U;function cl(r,e,n,o){let i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:uo[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(r._autoPong=i.autoPong,!uo.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${uo.join(", ")})`);let l;if(e instanceof ao)l=e;else try{l=new ao(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}l.protocol==="http:"?l.protocol="ws:":l.protocol==="https:"&&(l.protocol="wss:"),r._url=l.href;let f=l.protocol==="wss:",p=l.protocol==="ws+unix:",m;if(l.protocol!=="ws:"&&!f&&!p?m=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:p&&!l.pathname?m="The URL's pathname is empty":l.hash&&(m="The URL contains a fragment identifier"),m){let w=new SyntaxError(m);if(r._redirects===0)throw w;An(r,w);return}let c=f?443:80,d=dd(16).toString("base64"),b=f?ud.request:cd.request,S=new Set,R;if(i.createConnection=i.createConnection||(f?xd:Pd),i.defaultPort=i.defaultPort||c,i.port=l.port||c,i.host=l.hostname.startsWith("[")?l.hostname.slice(1,-1):l.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":d,Connection:"Upgrade",Upgrade:"websocket"},i.path=l.pathname+l.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(R=new nt(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=Ed({[nt.extensionName]:R.offer()})),n.length){for(let w of n){if(typeof w!="string"||!vd.test(w)||S.has(w))throw new SyntaxError("An invalid or duplicated subprotocol was specified");S.add(w)}i.headers["Sec-WebSocket-Protocol"]=n.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(l.username||l.password)&&(i.auth=`${l.username}:${l.password}`),p){let w=i.path.split(":");i.socketPath=w[0],i.path=w[1]}let g;if(i.followRedirects){if(r._redirects===0){r._originalIpc=p,r._originalSecure=f,r._originalHostOrSocketPath=p?i.socketPath:l.host;let w=o&&o.headers;if(o={...o,headers:{}},w)for(let[C,v]of Object.entries(w))o.headers[C.toLowerCase()]=v}else if(r.listenerCount("redirect")===0){let w=p?r._originalIpc?i.socketPath===r._originalHostOrSocketPath:!1:r._originalIpc?!1:l.host===r._originalHostOrSocketPath;(!w||r._originalSecure&&!f)&&(delete i.headers.authorization,delete i.headers.cookie,w||delete i.headers.host,i.auth=void 0)}i.auth&&!o.headers.authorization&&(o.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),g=r._req=b(i),r._redirects&&r.emit("redirect",r.url,g)}else g=r._req=b(i);i.timeout&&g.on("timeout",()=>{se(r,g,"Opening handshake has timed out")}),g.on("error",w=>{g===null||g[ul]||(g=r._req=null,An(r,w))}),g.on("response",w=>{let C=w.headers.location,v=w.statusCode;if(C&&i.followRedirects&&v>=300&&v<400){if(++r._redirects>i.maxRedirects){se(r,g,"Maximum redirects exceeded");return}g.abort();let A;try{A=new ao(C,e)}catch{let k=new SyntaxError(`Invalid URL: ${C}`);An(r,k);return}cl(r,A,n,o)}else r.emit("unexpected-response",g,w)||se(r,g,`Unexpected server response: ${w.statusCode}`)}),g.on("upgrade",(w,C,v)=>{if(r.emit("upgrade",w),r.readyState!==U.CONNECTING)return;g=r._req=null;let A=w.headers.upgrade;if(A===void 0||A.toLowerCase()!=="websocket"){se(r,C,"Invalid Upgrade header");return}let F=hd("sha1").update(d+_d).digest("base64");if(w.headers["sec-websocket-accept"]!==F){se(r,C,"Invalid Sec-WebSocket-Accept header");return}let k=w.headers["sec-websocket-protocol"],B;if(k!==void 0?S.size?S.has(k)||(B="Server sent an invalid subprotocol"):B="Server sent a subprotocol but none was requested":S.size&&(B="Server sent no subprotocol"),B){se(r,C,B);return}k&&(r._protocol=k);let I=w.headers["sec-websocket-extensions"];if(I!==void 0){if(!R){se(r,C,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let j;try{j=Cd(I)}catch{se(r,C,"Invalid Sec-WebSocket-Extensions header");return}let me=Object.keys(j);if(me.length!==1||me[0]!==nt.extensionName){se(r,C,"Server indicated an extension that was not requested");return}try{R.accept(j[nt.extensionName])}catch{se(r,C,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[nt.extensionName]=R}r.setSocket(C,v,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(g,r):g.end()}function An(r,e){r._readyState=U.CLOSING,r._errorEmitted=!0,r.emit("error",e),r.emitClose()}function Pd(r){return r.path=r.socketPath,al.connect(r)}function xd(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=al.isIP(r.host)?"":r.host),fd.connect(r)}function se(r,e,n){r._readyState=U.CLOSING;let o=new Error(n);Error.captureStackTrace(o,se),e.setHeader?(e[ul]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(An,r,o)):(e.destroy(o),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function co(r,e,n){if(e){let o=yd(e)?e.size:Rd(e).length;r._socket?r._sender._bufferedBytes+=o:r._bufferedAmount+=o}if(n){let o=new Error(`WebSocket is not open: readyState ${r.readyState} (${$e[r.readyState]})`);process.nextTick(n,o)}}function kd(r,e){let n=this[H];n._closeFrameReceived=!0,n._closeMessage=e,n._closeCode=r,n._socket[H]!==void 0&&(n._socket.removeListener("data",Bn),process.nextTick(fl,n._socket),r===1005?n.close():n.close(r,e))}function Od(){let r=this[H];r.isPaused||r._socket.resume()}function Ad(r){let e=this[H];e._socket[H]!==void 0&&(e._socket.removeListener("data",Bn),process.nextTick(fl,e._socket),e.close(r[gd])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",r))}function il(){this[H].emitClose()}function Bd(r,e){this[H].emit("message",r,e)}function Ld(r){let e=this[H];e._autoPong&&e.pong(r,!this._isServer,ll),e.emit("ping",r)}function Dd(r){this[H].emit("pong",r)}function fl(r){r.resume()}function Id(r){let e=this[H];e.readyState!==U.CLOSED&&(e.readyState===U.OPEN&&(e._readyState=U.CLOSING,dl(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",r)))}function dl(r){r._closeTimer=setTimeout(r._socket.destroy.bind(r._socket),Td)}function hl(){let r=this[H];this.removeListener("close",hl),this.removeListener("data",Bn),this.removeListener("end",pl),r._readyState=U.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[H]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",il),r._receiver.on("finish",il))}function Bn(r){this[H]._receiver.write(r)||this.pause()}function pl(){let r=this[H];r._readyState=U.CLOSING,r._receiver.end(),this.end()}function ml(){let r=this[H];this.removeListener("error",ml),this.on("error",ll),r&&(r._readyState=U.CLOSING,this.destroy())}});var Sl=M((Bm,gl)=>{"use strict";var Am=Ln(),{Duplex:Fd}=require("stream");function _l(r){r.emit("close")}function Nd(){!this.destroyed&&this._writableState.finished&&this.destroy()}function bl(r){this.removeListener("error",bl),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function Wd(r,e){let n=!0,o=new Fd({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return r.on("message",function(l,f){let p=!f&&o._readableState.objectMode?l.toString():l;o.push(p)||r.pause()}),r.once("error",function(l){o.destroyed||(n=!1,o.destroy(l))}),r.once("close",function(){o.destroyed||o.push(null)}),o._destroy=function(i,l){if(r.readyState===r.CLOSED){l(i),process.nextTick(_l,o);return}let f=!1;r.once("error",function(m){f=!0,l(m)}),r.once("close",function(){f||l(i),process.nextTick(_l,o)}),n&&r.terminate()},o._final=function(i){if(r.readyState===r.CONNECTING){r.once("open",function(){o._final(i)});return}r._socket!==null&&(r._socket._writableState.finished?(i(),o._readableState.endEmitted&&o.destroy()):(r._socket.once("finish",function(){i()}),r.close()))},o._read=function(){r.isPaused&&r.resume()},o._write=function(i,l,f){if(r.readyState===r.CONNECTING){r.once("open",function(){o._write(i,l,f)});return}r.send(i,f)},o.on("end",Nd),o.on("error",bl),o}gl.exports=Wd});var El=M((Lm,wl)=>{"use strict";var{tokenChars:qd}=jt();function Md(r){let e=new Set,n=-1,o=-1,i=0;for(i;i<r.length;i++){let f=r.charCodeAt(i);if(o===-1&&qd[f]===1)n===-1&&(n=i);else if(i!==0&&(f===32||f===9))o===-1&&n!==-1&&(o=i);else if(f===44){if(n===-1)throw new SyntaxError(`Unexpected character at index ${i}`);o===-1&&(o=i);let p=r.slice(n,o);if(e.has(p))throw new SyntaxError(`The "${p}" subprotocol is duplicated`);e.add(p),n=o=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(n===-1||o!==-1)throw new SyntaxError("Unexpected end of input");let l=r.slice(n,i);if(e.has(l))throw new SyntaxError(`The "${l}" subprotocol is duplicated`);return e.add(l),e}wl.exports={parse:Md}});var kl=M((Im,xl)=>{"use strict";var Ud=require("events"),Dn=require("http"),{Duplex:Dm}=require("stream"),{createHash:jd}=require("crypto"),Cl=io(),Et=Cr(),$d=El(),zd=Ln(),{GUID:Hd,kWebSocket:Vd}=Me(),Gd=/^[+/0-9A-Za-z]{22}==$/,Rl=0,Tl=1,Pl=2,fo=class extends Ud{constructor(e,n){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:zd,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Dn.createServer((o,i)=>{let l=Dn.STATUS_CODES[426];i.writeHead(426,{"Content-Length":l.length,"Content-Type":"text/plain"}),i.end(l)}),this._server.listen(e.port,e.host,e.backlog,n)):e.server&&(this._server=e.server),this._server){let o=this.emit.bind(this,"connection");this._removeListeners=Yd(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,l,f)=>{this.handleUpgrade(i,l,f,o)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=Rl}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===Pl){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Pr,this);return}if(e&&this.once("close",e),this._state!==Tl)if(this._state=Tl,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Pr,this):process.nextTick(Pr,this);else{let n=this._server;this._removeListeners(),this._removeListeners=this._server=null,n.close(()=>{Pr(this)})}}shouldHandle(e){if(this.options.path){let n=e.url.indexOf("?");if((n!==-1?e.url.slice(0,n):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,n,o,i){n.on("error",vl);let l=e.headers["sec-websocket-key"],f=e.headers.upgrade,p=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Ct(this,e,n,405,"Invalid HTTP method");return}if(f===void 0||f.toLowerCase()!=="websocket"){Ct(this,e,n,400,"Invalid Upgrade header");return}if(l===void 0||!Gd.test(l)){Ct(this,e,n,400,"Missing or invalid Sec-WebSocket-Key header");return}if(p!==8&&p!==13){Ct(this,e,n,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){xr(n,400);return}let m=e.headers["sec-websocket-protocol"],c=new Set;if(m!==void 0)try{c=$d.parse(m)}catch{Ct(this,e,n,400,"Invalid Sec-WebSocket-Protocol header");return}let d=e.headers["sec-websocket-extensions"],b={};if(this.options.perMessageDeflate&&d!==void 0){let S=new Et(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let R=Cl.parse(d);R[Et.extensionName]&&(S.accept(R[Et.extensionName]),b[Et.extensionName]=S)}catch{Ct(this,e,n,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let S={origin:e.headers[`${p===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(S,(R,g,w,C)=>{if(!R)return xr(n,g||401,w,C);this.completeUpgrade(b,l,c,e,n,o,i)});return}if(!this.options.verifyClient(S))return xr(n,401)}this.completeUpgrade(b,l,c,e,n,o,i)}completeUpgrade(e,n,o,i,l,f,p){if(!l.readable||!l.writable)return l.destroy();if(l[Vd])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>Rl)return xr(l,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${jd("sha1").update(n+Hd).digest("base64")}`],d=new this.options.WebSocket(null,void 0,this.options);if(o.size){let b=this.options.handleProtocols?this.options.handleProtocols(o,i):o.values().next().value;b&&(c.push(`Sec-WebSocket-Protocol: ${b}`),d._protocol=b)}if(e[Et.extensionName]){let b=e[Et.extensionName].params,S=Cl.format({[Et.extensionName]:[b]});c.push(`Sec-WebSocket-Extensions: ${S}`),d._extensions=e}this.emit("headers",c,i),l.write(c.concat(`\r
`).join(`\r
`)),l.removeListener("error",vl),d.setSocket(l,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(d),d.on("close",()=>{this.clients.delete(d),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Pr,this)})),p(d,i)}};xl.exports=fo;function Yd(r,e){for(let n of Object.keys(e))r.on(n,e[n]);return function(){for(let o of Object.keys(e))r.removeListener(o,e[o])}}function Pr(r){r._state=Pl,r.emit("close")}function vl(){this.destroy()}function xr(r,e,n,o){n=n||Dn.STATUS_CODES[e],o={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...o},r.once("finish",r.destroy),r.end(`HTTP/1.1 ${e} ${Dn.STATUS_CODES[e]}\r
`+Object.keys(o).map(i=>`${i}: ${o[i]}`).join(`\r
`)+`\r
\r
`+n)}function Ct(r,e,n,o,i){if(r.listenerCount("wsClientError")){let l=new Error(i);Error.captureStackTrace(l,Ct),r.emit("wsClientError",l,n,e)}else xr(n,o,i)}});var Il=M((Vm,Dl)=>{var Gt=1e3,Yt=Gt*60,Kt=Yt*60,Rt=Kt*24,eh=Rt*7,th=Rt*365.25;Dl.exports=function(r,e){e=e||{};var n=typeof r;if(n==="string"&&r.length>0)return rh(r);if(n==="number"&&isFinite(r))return e.long?sh(r):nh(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function rh(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var n=parseFloat(e[1]),o=(e[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return n*th;case"weeks":case"week":case"w":return n*eh;case"days":case"day":case"d":return n*Rt;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Kt;case"minutes":case"minute":case"mins":case"min":case"m":return n*Yt;case"seconds":case"second":case"secs":case"sec":case"s":return n*Gt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function nh(r){var e=Math.abs(r);return e>=Rt?Math.round(r/Rt)+"d":e>=Kt?Math.round(r/Kt)+"h":e>=Yt?Math.round(r/Yt)+"m":e>=Gt?Math.round(r/Gt)+"s":r+"ms"}function sh(r){var e=Math.abs(r);return e>=Rt?Wn(r,e,Rt,"day"):e>=Kt?Wn(r,e,Kt,"hour"):e>=Yt?Wn(r,e,Yt,"minute"):e>=Gt?Wn(r,e,Gt,"second"):r+" ms"}function Wn(r,e,n,o){var i=e>=n*1.5;return Math.round(r/n)+" "+o+(i?"s":"")}});var mo=M((Gm,Fl)=>{function oh(r){n.debug=n,n.default=n,n.coerce=m,n.disable=f,n.enable=i,n.enabled=p,n.humanize=Il(),n.destroy=c,Object.keys(r).forEach(d=>{n[d]=r[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let b=0;for(let S=0;S<d.length;S++)b=(b<<5)-b+d.charCodeAt(S),b|=0;return n.colors[Math.abs(b)%n.colors.length]}n.selectColor=e;function n(d){let b,S=null,R,g;function w(...C){if(!w.enabled)return;let v=w,A=Number(new Date),F=A-(b||A);v.diff=F,v.prev=b,v.curr=A,b=A,C[0]=n.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let k=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(I,j)=>{if(I==="%%")return"%";k++;let me=n.formatters[j];if(typeof me=="function"){let xe=C[k];I=me.call(v,xe),C.splice(k,1),k--}return I}),n.formatArgs.call(v,C),(v.log||n.log).apply(v,C)}return w.namespace=d,w.useColors=n.useColors(),w.color=n.selectColor(d),w.extend=o,w.destroy=n.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(R!==n.namespaces&&(R=n.namespaces,g=n.enabled(d)),g),set:C=>{S=C}}),typeof n.init=="function"&&n.init(w),w}function o(d,b){let S=n(this.namespace+(typeof b>"u"?":":b)+d);return S.log=this.log,S}function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let b=(typeof d=="string"?d:"").trim().replace(" ",",").split(",").filter(Boolean);for(let S of b)S[0]==="-"?n.skips.push(S.slice(1)):n.names.push(S)}function l(d,b){let S=0,R=0,g=-1,w=0;for(;S<d.length;)if(R<b.length&&(b[R]===d[S]||b[R]==="*"))b[R]==="*"?(g=R,w=S,R++):(S++,R++);else if(g!==-1)R=g+1,w++,S=w;else return!1;for(;R<b.length&&b[R]==="*";)R++;return R===b.length}function f(){let d=[...n.names,...n.skips.map(b=>"-"+b)].join(",");return n.enable(""),d}function p(d){for(let b of n.skips)if(l(d,b))return!1;for(let b of n.names)if(l(d,b))return!0;return!1}function m(d){return d instanceof Error?d.stack||d.message:d}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}Fl.exports=oh});var Nl=M((oe,qn)=>{oe.formatArgs=ah;oe.save=lh;oe.load=uh;oe.useColors=ih;oe.storage=ch();oe.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();oe.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ih(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ah(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+qn.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let n=0,o=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(o=n))}),r.splice(o,0,e)}oe.log=console.debug||console.log||(()=>{});function lh(r){try{r?oe.storage.setItem("debug",r):oe.storage.removeItem("debug")}catch{}}function uh(){let r;try{r=oe.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function ch(){try{return localStorage}catch{}}qn.exports=mo()(oe);var{formatters:fh}=qn.exports;fh.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ql=M((V,Un)=>{var dh=require("tty"),Mn=require("util");V.init=gh;V.log=yh;V.formatArgs=ph;V.save=_h;V.load=bh;V.useColors=hh;V.destroy=Mn.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");V.colors=[6,2,3,4,5,1];try{let r=require("supports-color");r&&(r.stderr||r).level>=2&&(V.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}V.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,l)=>l.toUpperCase()),o=process.env[e];return/^(yes|on|true|enabled)$/i.test(o)?o=!0:/^(no|off|false|disabled)$/i.test(o)?o=!1:o==="null"?o=null:o=Number(o),r[n]=o,r},{});function hh(){return"colors"in V.inspectOpts?!!V.inspectOpts.colors:dh.isatty(process.stderr.fd)}function ph(r){let{namespace:e,useColors:n}=this;if(n){let o=this.color,i="\x1B[3"+(o<8?o:"8;5;"+o),l=`  ${i};1m${e} \x1B[0m`;r[0]=l+r[0].split(`
`).join(`
`+l),r.push(i+"m+"+Un.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=mh()+e+" "+r[0]}function mh(){return V.inspectOpts.hideDate?"":new Date().toISOString()+" "}function yh(...r){return process.stderr.write(Mn.formatWithOptions(V.inspectOpts,...r)+`
`)}function _h(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function bh(){return process.env.DEBUG}function gh(r){r.inspectOpts={};let e=Object.keys(V.inspectOpts);for(let n=0;n<e.length;n++)r.inspectOpts[e[n]]=V.inspectOpts[e[n]]}Un.exports=mo()(V);var{formatters:Wl}=Un.exports;Wl.o=function(r){return this.inspectOpts.colors=this.useColors,Mn.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Wl.O=function(r){return this.inspectOpts.colors=this.useColors,Mn.inspect(r,this.inspectOpts)}});var _o=M((Ym,yo)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?yo.exports=Nl():yo.exports=ql()});var jl=M(X=>{"use strict";var Sh=X&&X.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(r,o,i)}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),wh=X&&X.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Ml=X&&X.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.prototype.hasOwnProperty.call(r,n)&&Sh(e,r,n);return wh(e,r),e};Object.defineProperty(X,"__esModule",{value:!0});X.req=X.json=X.toBuffer=void 0;var Eh=Ml(require("http")),Ch=Ml(require("https"));async function Ul(r){let e=0,n=[];for await(let o of r)e+=o.length,n.push(o);return Buffer.concat(n,e)}X.toBuffer=Ul;async function Rh(r){let n=(await Ul(r)).toString("utf8");try{return JSON.parse(n)}catch(o){let i=o;throw i.message+=` (input: ${n})`,i}}X.json=Rh;function Th(r,e={}){let o=((typeof r=="string"?r:r.href).startsWith("https:")?Ch:Eh).request(r,e),i=new Promise((l,f)=>{o.once("response",l).once("error",f).end()});return o.then=i.then.bind(i),o}X.req=Th});var Vl=M(ie=>{"use strict";var zl=ie&&ie.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(r,o,i)}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),vh=ie&&ie.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Hl=ie&&ie.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.prototype.hasOwnProperty.call(r,n)&&zl(e,r,n);return vh(e,r),e},Ph=ie&&ie.__exportStar||function(r,e){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&zl(e,r,n)};Object.defineProperty(ie,"__esModule",{value:!0});ie.Agent=void 0;var xh=Hl(require("net")),$l=Hl(require("http")),kh=require("https");Ph(jl(),ie);var Pe=Symbol("AgentBaseInternalState"),bo=class extends $l.Agent{constructor(e){super(e),this[Pe]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:n}=new Error;return typeof n!="string"?!1:n.split(`
`).some(o=>o.indexOf("(https.js:")!==-1||o.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let n=new xh.Socket({writable:!1});return this.sockets[e].push(n),this.totalSocketCount++,n}decrementSockets(e,n){if(!this.sockets[e]||n===null)return;let o=this.sockets[e],i=o.indexOf(n);i!==-1&&(o.splice(i,1),this.totalSocketCount--,o.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?kh.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,n,o){let i={...n,secureEndpoint:this.isSecureEndpoint(n)},l=this.getName(i),f=this.incrementSockets(l);Promise.resolve().then(()=>this.connect(e,i)).then(p=>{if(this.decrementSockets(l,f),p instanceof $l.Agent)try{return p.addRequest(e,i)}catch(m){return o(m)}this[Pe].currentSocket=p,super.createSocket(e,n,o)},p=>{this.decrementSockets(l,f),o(p)})}createConnection(){let e=this[Pe].currentSocket;if(this[Pe].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[Pe].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[Pe]&&(this[Pe].defaultPort=e)}get protocol(){return this[Pe].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[Pe]&&(this[Pe].protocol=e)}};ie.Agent=bo});var Gl=M(Qt=>{"use strict";var Oh=Qt&&Qt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.parseProxyResponse=void 0;var Ah=Oh(_o()),jn=(0,Ah.default)("https-proxy-agent:parse-proxy-response");function Bh(r){return new Promise((e,n)=>{let o=0,i=[];function l(){let d=r.read();d?c(d):r.once("readable",l)}function f(){r.removeListener("end",p),r.removeListener("error",m),r.removeListener("readable",l)}function p(){f(),jn("onend"),n(new Error("Proxy connection ended before receiving CONNECT response"))}function m(d){f(),jn("onerror %o",d),n(d)}function c(d){i.push(d),o+=d.length;let b=Buffer.concat(i,o),S=b.indexOf(`\r
\r
`);if(S===-1){jn("have not received end of HTTP headers yet..."),l();return}let R=b.slice(0,S).toString("ascii").split(`\r
`),g=R.shift();if(!g)return r.destroy(),n(new Error("No header received from proxy CONNECT response"));let w=g.split(" "),C=+w[1],v=w.slice(2).join(" "),A={};for(let F of R){if(!F)continue;let k=F.indexOf(":");if(k===-1)return r.destroy(),n(new Error(`Invalid header from proxy CONNECT response: "${F}"`));let B=F.slice(0,k).toLowerCase(),I=F.slice(k+1).trimStart(),j=A[B];typeof j=="string"?A[B]=[j,I]:Array.isArray(j)?j.push(I):A[B]=I}jn("got proxy server response: %o %o",g,A),f(),e({connect:{statusCode:C,statusText:v,headers:A},buffered:b})}r.on("error",m),r.on("end",p),l()})}Qt.parseProxyResponse=Bh});var Xl=M(pe=>{"use strict";var Lh=pe&&pe.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(r,o,i)}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),Dh=pe&&pe.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Jl=pe&&pe.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.prototype.hasOwnProperty.call(r,n)&&Lh(e,r,n);return Dh(e,r),e},Zl=pe&&pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pe,"__esModule",{value:!0});pe.HttpsProxyAgent=void 0;var $n=Jl(require("net")),Yl=Jl(require("tls")),Ih=Zl(require("assert")),Fh=Zl(_o()),Nh=Vl(),Wh=require("url"),qh=Gl(),kr=(0,Fh.default)("https-proxy-agent"),Kl=r=>r.servername===void 0&&r.host&&!$n.isIP(r.host)?{...r,servername:r.host}:r,zn=class extends Nh.Agent{constructor(e,n){super(n),this.options={path:void 0},this.proxy=typeof e=="string"?new Wh.URL(e):e,this.proxyHeaders=(n==null?void 0:n.headers)??{},kr("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let o=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...n?Ql(n,"headers"):null,host:o,port:i}}async connect(e,n){let{proxy:o}=this;if(!n.host)throw new TypeError('No "host" provided');let i;o.protocol==="https:"?(kr("Creating `tls.Socket`: %o",this.connectOpts),i=Yl.connect(Kl(this.connectOpts))):(kr("Creating `net.Socket`: %o",this.connectOpts),i=$n.connect(this.connectOpts));let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},f=$n.isIPv6(n.host)?`[${n.host}]`:n.host,p=`CONNECT ${f}:${n.port} HTTP/1.1\r
`;if(o.username||o.password){let S=`${decodeURIComponent(o.username)}:${decodeURIComponent(o.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(S).toString("base64")}`}l.Host=`${f}:${n.port}`,l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let S of Object.keys(l))p+=`${S}: ${l[S]}\r
`;let m=(0,qh.parseProxyResponse)(i);i.write(`${p}\r
`);let{connect:c,buffered:d}=await m;if(e.emit("proxyConnect",c),this.emit("proxyConnect",c,e),c.statusCode===200)return e.once("socket",Mh),n.secureEndpoint?(kr("Upgrading socket connection to TLS"),Yl.connect({...Ql(Kl(n),"host","path","port"),socket:i})):i;i.destroy();let b=new $n.Socket({writable:!1});return b.readable=!0,e.once("socket",S=>{kr("Replaying proxy buffer for failed request"),(0,Ih.default)(S.listenerCount("data")>0),S.push(d),S.push(null)}),b}};zn.protocols=["http","https"];pe.HttpsProxyAgent=zn;function Mh(r){r.resume()}function Ql(r,...e){let n={},o;for(o in r)e.includes(o)||(n[o]=r[o]);return n}});var ot=$(require("fs"),1),vt=$(require("path"),1);var Ca=$(require("node:http"),1),Ra=$(require("node:https"),1),bt=$(require("node:zlib"),1),ne=$(require("node:stream"),1),gr=require("node:buffer");function uf(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let e=r.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let n=r.substring(5,e).split(";"),o="",i=!1,l=n[0]||"text/plain",f=l;for(let d=1;d<n.length;d++)n[d]==="base64"?i=!0:n[d]&&(f+=`;${n[d]}`,n[d].indexOf("charset=")===0&&(o=n[d].substring(8)));!n[0]&&!o.length&&(f+=";charset=US-ASCII",o="US-ASCII");let p=i?"base64":"ascii",m=unescape(r.substring(e+1)),c=Buffer.from(m,p);return c.type=l,c.typeFull=f,c.charset=o,c}var Vi=uf;var ce=$(require("node:stream"),1),qe=require("node:util"),te=require("node:buffer");hr();fn();var We=class extends Error{constructor(e,n){super(e),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var J=class extends We{constructor(e,n,o){super(e,n),o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}};var dn=Symbol.toStringTag,qs=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[dn]==="URLSearchParams",mr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[dn]),ta=r=>typeof r=="object"&&(r[dn]==="AbortSignal"||r[dn]==="EventTarget"),ra=(r,e)=>{let n=new URL(e).hostname,o=new URL(r).hostname;return n===o||n.endsWith(`.${o}`)},na=(r,e)=>{let n=new URL(e).protocol,o=new URL(r).protocol;return n===o};var Rf=(0,qe.promisify)(ce.default.pipeline),Z=Symbol("Body internals"),Te=class{constructor(e,{size:n=0}={}){let o=null;e===null?e=null:qs(e)?e=te.Buffer.from(e.toString()):mr(e)||te.Buffer.isBuffer(e)||(qe.types.isAnyArrayBuffer(e)?e=te.Buffer.from(e):ArrayBuffer.isView(e)?e=te.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof ce.default||(e instanceof mt?(e=ea(e),o=e.type.split("=")[1]):e=te.Buffer.from(String(e))));let i=e;te.Buffer.isBuffer(e)?i=ce.default.Readable.from(e):mr(e)&&(i=ce.default.Readable.from(e.stream())),this[Z]={body:e,stream:i,boundary:o,disturbed:!1,error:null},this.size=n,e instanceof ce.default&&e.on("error",l=>{let f=l instanceof We?l:new J(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[Z].error=f})}get body(){return this[Z].stream}get bodyUsed(){return this[Z].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:n,byteLength:o}=await js(this);return e.slice(n,n+o)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let o=new mt,i=new URLSearchParams(await this.text());for(let[l,f]of i)o.append(l,f);return o}let{toFormData:n}=await Promise.resolve().then(()=>(la(),aa));return n(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[Z].body&&this[Z].body.type||"",n=await this.arrayBuffer();return new Ne([n],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await js(this);return new TextDecoder().decode(e)}buffer(){return js(this)}};Te.prototype.buffer=(0,qe.deprecate)(Te.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Te.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,qe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function js(r){if(r[Z].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[Z].disturbed=!0,r[Z].error)throw r[Z].error;let{body:e}=r;if(e===null)return te.Buffer.alloc(0);if(!(e instanceof ce.default))return te.Buffer.alloc(0);let n=[],o=0;try{for await(let i of e){if(r.size>0&&o+i.length>r.size){let l=new J(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw e.destroy(l),l}o+=i.length,n.push(i)}}catch(i){throw i instanceof We?i:new J(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return n.every(i=>typeof i=="string")?te.Buffer.from(n.join("")):te.Buffer.concat(n,o)}catch(i){throw new J(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new J(`Premature close of server response while trying to fetch ${r.url}`)}var Mt=(r,e)=>{let n,o,{body:i}=r[Z];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof ce.default&&typeof i.getBoundary!="function"&&(n=new ce.PassThrough({highWaterMark:e}),o=new ce.PassThrough({highWaterMark:e}),i.pipe(n),i.pipe(o),r[Z].stream=n,i=o),i},Tf=(0,qe.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),yn=(r,e)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":qs(r)?"application/x-www-form-urlencoded;charset=UTF-8":mr(r)?r.type||null:te.Buffer.isBuffer(r)||qe.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof mt?`multipart/form-data; boundary=${e[Z].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Tf(r)}`:r instanceof ce.default?null:"text/plain;charset=UTF-8",ua=r=>{let{body:e}=r[Z];return e===null?0:mr(e)?e.size:te.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},ca=async(r,{body:e})=>{e===null?r.end():await Rf(e,r)};var $s=require("node:util"),_r=$(require("node:http"),1),_n=typeof _r.default.validateHeaderName=="function"?_r.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let e=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},zs=typeof _r.default.validateHeaderValue=="function"?_r.default.validateHeaderValue:(r,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let n=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},re=class r extends URLSearchParams{constructor(e){let n=[];if(e instanceof r){let o=e.raw();for(let[i,l]of Object.entries(o))n.push(...l.map(f=>[i,f]))}else if(e!=null)if(typeof e=="object"&&!$s.types.isBoxedPrimitive(e)){let o=e[Symbol.iterator];if(o==null)n.push(...Object.entries(e));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");n=[...e].map(i=>{if(typeof i!="object"||$s.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([o,i])=>(_n(o),zs(o,String(i)),[String(o).toLowerCase(),String(i)])):void 0,super(n),new Proxy(this,{get(o,i,l){switch(i){case"append":case"set":return(f,p)=>(_n(f),zs(f,String(p)),URLSearchParams.prototype[i].call(o,String(f).toLowerCase(),String(p)));case"delete":case"has":case"getAll":return f=>(_n(f),URLSearchParams.prototype[i].call(o,String(f).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,i,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let n=this.getAll(e);if(n.length===0)return null;let o=n.join(", ");return/^content-encoding$/i.test(e)&&(o=o.toLowerCase()),o}forEach(e,n=void 0){for(let o of this.keys())Reflect.apply(e,n,[this.get(o),o,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,n)=>(e[n]=this.getAll(n),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,n)=>{let o=this.getAll(n);return n==="host"?e[n]=o[0]:e[n]=o.length>1?o:o[0],e},{})}};Object.defineProperties(re.prototype,["get","entries","forEach","values"].reduce((r,e)=>(r[e]={enumerable:!0},r),{}));function fa(r=[]){return new re(r.reduce((e,n,o,i)=>(o%2===0&&e.push(i.slice(o,o+2)),e),[]).filter(([e,n])=>{try{return _n(e),zs(e,String(n)),!0}catch{return!1}}))}var vf=new Set([301,302,303,307,308]),bn=r=>vf.has(r);var ge=Symbol("Response internals"),fe=class r extends Te{constructor(e=null,n={}){super(e,n);let o=n.status!=null?n.status:200,i=new re(n.headers);if(e!==null&&!i.has("Content-Type")){let l=yn(e,this);l&&i.append("Content-Type",l)}this[ge]={type:"default",url:n.url,status:o,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[ge].type}get url(){return this[ge].url||""}get status(){return this[ge].status}get ok(){return this[ge].status>=200&&this[ge].status<300}get redirected(){return this[ge].counter>0}get statusText(){return this[ge].statusText}get headers(){return this[ge].headers}get highWaterMark(){return this[ge].highWaterMark}clone(){return new r(Mt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,n=302){if(!bn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new r(null,{headers:{location:new URL(e).toString()},status:n})}static error(){let e=new r(null,{status:0,statusText:""});return e[ge].type="error",e}static json(e=void 0,n={}){let o=JSON.stringify(e);if(o===void 0)throw new TypeError("data is not JSON serializable");let i=new re(n&&n.headers);return i.has("content-type")||i.set("content-type","application/json"),new r(o,{...n,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(fe.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Sa=require("node:url"),wa=require("node:util");var da=r=>{if(r.search)return r.search;let e=r.href.length-1,n=r.hash||(r.href[e]==="#"?"#":"");return r.href[e-n.length]==="?"?"?":""};var pa=require("node:net");function ha(r,e=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",e&&(r.pathname="",r.search=""),r)}var ma=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ya="strict-origin-when-cross-origin";function _a(r){if(!ma.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Pf(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let e=r.host.replace(/(^\[)|(]$)/g,""),n=(0,pa.isIP)(e);return n===4&&/^127\./.test(e)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function Ut(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Pf(r)}function ba(r,{referrerURLCallback:e,referrerOriginCallback:n}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let o=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,l=ha(i),f=ha(i,!0);l.toString().length>4096&&(l=f),e&&(l=e(l)),n&&(f=n(f));let p=new URL(r.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return Ut(l)&&!Ut(p)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===p.origin?l:Ut(l)&&!Ut(p)?"no-referrer":f;case"same-origin":return l.origin===p.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===p.origin?l:f;case"no-referrer-when-downgrade":return Ut(l)&&!Ut(p)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}function ga(r){let e=(r.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let o of e)o&&ma.has(o)&&(n=o);return n}var z=Symbol("Request internals"),br=r=>typeof r=="object"&&typeof r[z]=="object",xf=(0,wa.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),_t=class r extends Te{constructor(e,n={}){let o;if(br(e)?o=new URL(e.url):(o=new URL(e),e={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let i=n.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!br(n)&&"data"in n&&xf(),(n.body!=null||br(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=n.body?n.body:br(e)&&e.body!==null?Mt(e):null;super(l,{size:n.size||e.size||0});let f=new re(n.headers||e.headers||{});if(l!==null&&!f.has("Content-Type")){let c=yn(l,this);c&&f.set("Content-Type",c)}let p=br(e)?e.signal:null;if("signal"in n&&(p=n.signal),p!=null&&!ta(p))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let m=n.referrer==null?e.referrer:n.referrer;if(m==="")m="no-referrer";else if(m){let c=new URL(m);m=/^about:(\/\/)?client$/.test(c)?"client":c}else m=void 0;this[z]={method:i,redirect:n.redirect||e.redirect||"follow",headers:f,parsedURL:o,signal:p,referrer:m},this.follow=n.follow===void 0?e.follow===void 0?20:e.follow:n.follow,this.compress=n.compress===void 0?e.compress===void 0?!0:e.compress:n.compress,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent,this.highWaterMark=n.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||e.referrerPolicy||""}get method(){return this[z].method}get url(){return(0,Sa.format)(this[z].parsedURL)}get headers(){return this[z].headers}get redirect(){return this[z].redirect}get signal(){return this[z].signal}get referrer(){if(this[z].referrer==="no-referrer")return"";if(this[z].referrer==="client")return"about:client";if(this[z].referrer)return this[z].referrer.toString()}get referrerPolicy(){return this[z].referrerPolicy}set referrerPolicy(e){this[z].referrerPolicy=_a(e)}clone(){return new r(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(_t.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ea=r=>{let{parsedURL:e}=r[z],n=new re(r[z].headers);n.has("Accept")||n.set("Accept","*/*");let o=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(o="0"),r.body!==null){let p=ua(r);typeof p=="number"&&!Number.isNaN(p)&&(o=String(p))}o&&n.set("Content-Length",o),r.referrerPolicy===""&&(r.referrerPolicy=ya),r.referrer&&r.referrer!=="no-referrer"?r[z].referrer=ba(r):r[z].referrer="no-referrer",r[z].referrer instanceof URL&&n.set("Referer",r.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),r.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=r;typeof i=="function"&&(i=i(e));let l=da(e),f={path:e.pathname+l,method:r.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:e,options:f}};var gn=class extends We{constructor(e,n="aborted"){super(e,n)}};fn();Ms();var kf=new Set(["data:","http:","https:"]);async function Se(r,e){return new Promise((n,o)=>{let i=new _t(r,e),{parsedURL:l,options:f}=Ea(i);if(!kf.has(l.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let g=Vi(i.url),w=new fe(g,{headers:{"Content-Type":g.typeFull}});n(w);return}let p=(l.protocol==="https:"?Ra.default:Ca.default).request,{signal:m}=i,c=null,d=()=>{let g=new gn("The operation was aborted.");o(g),i.body&&i.body instanceof ne.default.Readable&&i.body.destroy(g),!(!c||!c.body)&&c.body.emit("error",g)};if(m&&m.aborted){d();return}let b=()=>{d(),R()},S=p(l.toString(),f);m&&m.addEventListener("abort",b);let R=()=>{S.abort(),m&&m.removeEventListener("abort",b)};S.on("error",g=>{o(new J(`request to ${i.url} failed, reason: ${g.message}`,"system",g)),R()}),Of(S,g=>{c&&c.body&&c.body.destroy(g)}),process.version<"v14"&&S.on("socket",g=>{let w;g.prependListener("end",()=>{w=g._eventsCount}),g.prependListener("close",C=>{if(c&&w<g._eventsCount&&!C){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",v)}})}),S.on("response",g=>{S.setTimeout(0);let w=fa(g.rawHeaders);if(bn(g.statusCode)){let k=w.get("Location"),B=null;try{B=k===null?null:new URL(k,i.url)}catch{if(i.redirect!=="manual"){o(new J(`uri requested responds with an invalid redirect URL: ${k}`,"invalid-redirect")),R();return}}switch(i.redirect){case"error":o(new J(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),R();return;case"manual":break;case"follow":{if(B===null)break;if(i.counter>=i.follow){o(new J(`maximum redirect reached at: ${i.url}`,"max-redirect")),R();return}let I={headers:new re(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:Mt(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!ra(i.url,B)||!na(i.url,B))for(let me of["authorization","www-authenticate","cookie","cookie2"])I.headers.delete(me);if(g.statusCode!==303&&i.body&&e.body instanceof ne.default.Readable){o(new J("Cannot follow redirect with body being a readable stream","unsupported-redirect")),R();return}(g.statusCode===303||(g.statusCode===301||g.statusCode===302)&&i.method==="POST")&&(I.method="GET",I.body=void 0,I.headers.delete("content-length"));let j=ga(w);j&&(I.referrerPolicy=j),n(Se(new _t(B,I))),R();return}default:return o(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}m&&g.once("end",()=>{m.removeEventListener("abort",b)});let C=(0,ne.pipeline)(g,new ne.PassThrough,k=>{k&&o(k)});process.version<"v12.10"&&g.on("aborted",b);let v={url:i.url,status:g.statusCode,statusText:g.statusMessage,headers:w,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},A=w.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||A===null||g.statusCode===204||g.statusCode===304){c=new fe(C,v),n(c);return}let F={flush:bt.default.Z_SYNC_FLUSH,finishFlush:bt.default.Z_SYNC_FLUSH};if(A==="gzip"||A==="x-gzip"){C=(0,ne.pipeline)(C,bt.default.createGunzip(F),k=>{k&&o(k)}),c=new fe(C,v),n(c);return}if(A==="deflate"||A==="x-deflate"){let k=(0,ne.pipeline)(g,new ne.PassThrough,B=>{B&&o(B)});k.once("data",B=>{(B[0]&15)===8?C=(0,ne.pipeline)(C,bt.default.createInflate(),I=>{I&&o(I)}):C=(0,ne.pipeline)(C,bt.default.createInflateRaw(),I=>{I&&o(I)}),c=new fe(C,v),n(c)}),k.once("end",()=>{c||(c=new fe(C,v),n(c))});return}if(A==="br"){C=(0,ne.pipeline)(C,bt.default.createBrotliDecompress(),k=>{k&&o(k)}),c=new fe(C,v),n(c);return}c=new fe(C,v),n(c)}),ca(S,i).catch(o)})}function Of(r,e){let n=gr.Buffer.from(`0\r
\r
`),o=!1,i=!1,l;r.on("response",f=>{let{headers:p}=f;o=p["transfer-encoding"]==="chunked"&&!p["content-length"]}),r.on("socket",f=>{let p=()=>{if(o&&!i){let c=new Error("Premature close");c.code="ERR_STREAM_PREMATURE_CLOSE",e(c)}},m=c=>{i=gr.Buffer.compare(c.slice(-5),n)===0,!i&&l&&(i=gr.Buffer.compare(l.slice(-3),n.slice(0,3))===0&&gr.Buffer.compare(c.slice(-2),n.slice(3))===0),l=c};f.prependListener("close",p),f.on("data",m),r.on("close",()=>{f.removeListener("close",p),f.removeListener("data",m)})})}async function Ta(r){try{let n=await(await Se("https://api.getgrass.io/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();return!n.result||!n.result.data?null:n.result.data}catch(e){return console.error("Login Kh\xF4ng th\xE0nh c\xF4ng:",e.code||e.message),null}}async function Sn(r){let e={"Content-Type":"application/json; charset=utf-8","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36",Authorization:r};try{let o=await(await Se("https://api.getgrass.io/dailyEarnings?input=%7B%22limit%22:1%7D",{method:"GET",headers:e})).json(),i=o.result&&o.result.data&&o.result.data.data;if(!i||!Array.isArray(i)||i.length===0)return o.error?o.error.message:"No earnings data";i.sort((f,p)=>new Date(p.earningDate)-new Date(f.earningDate));let l=i[0];return{totalUptime:l.totalUptime,totalPoints:l.totalPoints}}catch(n){return console.error("L\u1EA5y Point l\u1ED7i:",n.code||n.message),null}}var Xt=$(require("fs"),1),vo=$(require("path"),1),au=$(require("events"),1);var Kd=$(Sl(),1),Qd=$(to(),1),Jd=$(so(),1),Ol=$(Ln(),1),Zd=$(kl(),1);var ze=Ol.default;var G=[];for(let r=0;r<256;++r)G.push((r+256).toString(16).slice(1));function Al(r,e=0){return(G[r[e+0]]+G[r[e+1]]+G[r[e+2]]+G[r[e+3]]+"-"+G[r[e+4]]+G[r[e+5]]+"-"+G[r[e+6]]+G[r[e+7]]+"-"+G[r[e+8]]+G[r[e+9]]+"-"+G[r[e+10]]+G[r[e+11]]+G[r[e+12]]+G[r[e+13]]+G[r[e+14]]+G[r[e+15]]).toLowerCase()}var Bl=require("crypto"),Fn=new Uint8Array(256),In=Fn.length;function ho(){return In>Fn.length-16&&((0,Bl.randomFillSync)(Fn),In=0),Fn.slice(In,In+=16)}var Ll=require("crypto"),po={randomUUID:Ll.randomUUID};function Xd(r,e,n){var i;if(po.randomUUID&&!e&&!r)return po.randomUUID();r=r||{};let o=r.random??((i=r.rng)==null?void 0:i.call(r))??ho();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let l=0;l<16;++l)e[n+l]=o[l];return e}return Al(o)}var Nn=Xd;var lu=$(Xl(),1),Uh=2*60*1e3,jh=6e3,$h="https://director.getgrass.io",Or=1e3,zh=["origin","referer","access-control-request-headers","access-control-request-method","access-control-allow-origin","cookie","date","dnt","trailer","upgrade"],eu=vo.default.join(process.cwd(),"data","setting.json"),uu="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36";function Hh(){let r={};if(Xt.default.existsSync(eu))try{r=JSON.parse(Xt.default.readFileSync(eu,"utf8"))}catch(e){console.error("Erro parse setting.json:",e)}return r.user_agent&&r.user_agent.length>0&&(uu=r.user_agent[Math.floor(Math.random()*r.user_agent.length)]),r.extension_id||(r.extension_id="lkbnfiajjmbhnfledhphioinpickokdi"),r.version||(r.version="5.1.1"),r}var tu=Hh(),Ar=r=>new Promise(e=>setTimeout(e,r)),Jt=()=>Math.floor(Date.now()/1e3),Vh=r=>typeof r=="string"&&r.length===36,Gh=()=>Math.floor(Math.random()*1e8),Br="wynd:browser_id",Zt="wynd:user_id",Yh="wynd:jwt",st="wynd:status",Kh="wynd:device",Qh="wynd:user",ru="wynd:authenticated",Jh="wynd:settings",nu="wynd:popup",go="wynd:permissions",su="accessToken",ou="refreshToken",iu="username",Zh="email",So="isConnectButtonActive",wo=class{constructor(e){this.file=e,this.data={},this.load()}load(){if(Xt.default.existsSync(this.file))try{this.data=JSON.parse(Xt.default.readFileSync(this.file,"utf8"))}catch(e){console.error("Erro load storage file:",e),this.data={}}}save(){Xt.default.writeFileSync(this.file,JSON.stringify(this.data,null,2))}async get(e){return this.data[e]!==void 0?this.data[e]:null}async set(e,n){this.data[e]=n,this.save()}async remove(e){delete this.data[e],this.save()}},Eo=class extends au.default{getManifest(){return{version:tu.version,id:tu.extension_id}}},er=class{constructor(){this.queue=[],this.isLocked=!1}async runExclusive(e){let n=await this.acquire();try{return await e()}finally{n()}}acquire(){return new Promise(e=>{this.queue.push({resolve:e}),this.dispatch()})}dispatch(){if(this.isLocked)return;let e=this.queue.shift();e&&(this.isLocked=!0,e.resolve(()=>{this.isLocked=!1,this.dispatch()}))}},Tt=class{constructor(e=10*60*1e3){this.defaultExpireMs=e,this.storage={},setInterval(()=>this.clearExpired(),60*1e3)}get(e){return this.checkKeyExpired(e),this.storage[e]?this.storage[e].value:null}set(e,n,o=null){let i=o||this.defaultExpireMs;this.storage[e]={value:n,expire_at:Date.now()+i}}del(e){delete this.storage[e]}exists(e){return this.checkKeyExpired(e),this.storage[e]!==void 0}clearExpired(){Object.keys(this.storage).forEach(e=>this.checkKeyExpired(e))}checkKeyExpired(e){(!this.storage[e]||Date.now()>this.storage[e].expire_at)&&delete this.storage[e]}},Co=class{constructor(){this.cookieMutex=new er,this.redirectMutex=new er,this.waitCookieTasks=new Tt,this.waitRedirectTasks=new Tt,this.cookieStorage=new Tt,this.redirectDataStorage=new Tt}async getResponseCookies(e,n){return new Promise(async(o,i)=>{let l=setTimeout(async()=>{await this.cookieMutex.runExclusive(()=>{this.waitCookieTasks.del(e),console.error(`[RPC Cookie] Timeout request ${e}`),i(`Timeout cho request ${e}`)})},n);await this.cookieMutex.runExclusive(()=>{let f=this.cookieStorage.get(e);f!==null?(clearTimeout(l),o(f)):this.waitCookieTasks.set(e,p=>{clearTimeout(l),o(p)})})})}async setResponseCookies(e,n){return this.cookieMutex.runExclusive(()=>{let o=this.waitCookieTasks.get(e);o?(o(n),this.waitCookieTasks.del(e)):this.cookieStorage.set(e,n)})}async setRedirectData(e,n){return this.redirectMutex.runExclusive(()=>{let o=this.waitRedirectTasks.get(e);o?(o(n),this.waitRedirectTasks.del(e)):this.redirectDataStorage.set(e,n)})}async getRedirectData(e,n){return new Promise(async(o,i)=>{let l=setTimeout(async()=>{await this.redirectMutex.runExclusive(()=>{this.waitRedirectTasks.del(e),console.error(`[RPC Data] Timeout redirect data ${e}`),i(`Timeout cho redirect data ${e}`)})},n);await this.redirectMutex.runExclusive(()=>{let f=this.redirectDataStorage.get(e);f!==null?(clearTimeout(l),o(f)):this.waitRedirectTasks.set(e,p=>{clearTimeout(l),o(p)})})})}async registerOnErrorOccuredEvent(e){return this.setResponseCookies(e,"")}},Xh=10*1e3,Hn=class{constructor(e){this.usedChromeRequestIds=new Tt,this.resolve=null,this.webRequestMutex=new er,this.fetchMutex=new er,this.proxyAgent=e}async fetch(e,n){return this.fetchMutex.runExclusive(()=>new Promise(async(o,i)=>{let l=null,f=setTimeout(async()=>{await this.webRequestMutex.runExclusive(()=>{this.resolve=null,o({requestId:null,responsePromise:l})})},Xh);await this.webRequestMutex.runExclusive(()=>{this.resolve&&(this.resolve=null,clearTimeout(f),i("Nhi\u1EC1u requestId \u0111ang ch\u1EDD")),l=Se(e,{...n,agent:this.proxyAgent}).catch(p=>{throw p}),this.resolve=p=>(clearTimeout(f),o({requestId:p,responsePromise:l}))})}))}async registerOnBeforeRequestEvent(e){return this.webRequestMutex.runExclusive(()=>{this.usedChromeRequestIds.exists(e)||this.processNewRequestId(e)})}async registerOnBeforeRedirectEvent(e){return this.webRequestMutex.runExclusive(()=>{this.usedChromeRequestIds.exists(e)||this.processNewRequestId(e)})}async registerOnCompletedEvent(e){return this.webRequestMutex.runExclusive(()=>{this.usedChromeRequestIds.exists(e)||this.processNewRequestId(e)})}async registerOnErrorOccuredEvent(e){return this.webRequestMutex.runExclusive(()=>{this.usedChromeRequestIds.exists(e)?Ro.registerOnErrorOccuredEvent(e):this.processNewRequestId(e)})}processNewRequestId(e){this.usedChromeRequestIds.set(e,1);let n=this.resolve;this.resolve=null,n(e)}},Ro=new Co,ep=new Hn,To=class{constructor(e={}){this.proxy=e.proxy||null,this.storageFile=e.storageFileOverride||vo.default.join(__dirname,"data","settingStorage.json"),this.chromeStorage=new wo(this.storageFile),this.proxyAgent=this.proxy?new lu.HttpsProxyAgent(this.proxy):void 0,this.chromeRuntime=new Eo,this.chrome={storage:{local:this.chromeStorage},runtime:this.chromeRuntime,webRequest:{onBeforeRequest:{addListener:()=>{}},onBeforeRedirect:{addListener:()=>{}},onCompleted:{addListener:()=>{}},onErrorOccurred:{addListener:()=>{}}},declarativeNetRequest:{updateSessionRules:n=>{console.log("Update rules:",n)}},permissions:{getAll:n=>n({origins:["<all_urls>"]}),onAdded:{addListener:()=>{}},onRemoved:{addListener:()=>{}}}},this.requestFetcher=new Hn(this.proxyAgent),this.websocket=null,this.lastLiveConnectionTimestamp=Jt(),this.lastCheckinTimestamp=0,this.userAgent=uu,this.RPCTable={HTTP_REQUEST:this.performHttpRequest.bind(this),AUTH:this.authenticate.bind(this),PONG:()=>{}},this._registerRuntimeListeners(),this._registerStorageListeners()}async updateBrowserId(){let e=await this.chromeStorage.get(Br);if(!e||typeof e=="string"&&e.trim()===""){let n=Nn();await this.chromeStorage.set(Br,n)}}async performHttpRequest(e){let n=Object.keys(e.headers).filter(c=>zh.includes(c.toLowerCase())).map(c=>({header:c,operation:"set",value:e.headers[c]})),o=[];if(n.length>0){let c=Gh();o.push(c);let d={id:c,priority:1,action:{type:"modifyHeaders",requestHeaders:n},condition:{urlFilter:`${e.url.replace(/\/$/,"")}`,tabIds:[chrome.tabs.TAB_ID_NONE]}};this.chrome.declarativeNetRequest.updateSessionRules({addRules:[d]})}let i={method:e.method,mode:"cors",cache:"no-cache",credentials:"omit",headers:e.headers,redirect:"manual"};if(e.body){let c=`data:application/octet-stream;base64,${e.body}`,d=await Se(c);i.body=await d.blob()}let{requestId:l,responsePromise:f}=await ep.fetch(e.url,i).catch(c=>({requestId:void 0,responsePromise:void 0}));if(f===void 0)return null;let p=await f.catch(c=>{});if(o.length>0&&this.chrome.declarativeNetRequest.updateSessionRules({removeRuleIds:o}),!p)return{url:e.url,status:400,status_text:"Bad Request",headers:{},body:""};if(p.type==="opaqueredirect")return l?await Ro.getRedirectData(l,5e3).then(d=>{let b=JSON.parse(d);return Object.hasOwn(b.headers,"Set-Cookie")&&(b.headers["Set-Cookie"]=JSON.parse(b.headers["Set-Cookie"])),{url:p.url,status:b.statusCode,status_text:"Redirect",headers:b.headers,body:""}}).catch(d=>null):null;let m={};return p.headers.forEach((c,d)=>{d.toLowerCase()!=="content-encoding"&&(m[d]=c)}),l&&await Ro.getResponseCookies(l,5e3).then(c=>{if(c!==""){let d=JSON.parse(c);d.length!==0&&(m["Set-Cookie"]=d)}}).catch(c=>{console.error(`Error occured while processing response cookies: ${c}`)}),{url:p.url,status:p.status,status_text:p.statusText,headers:m,body:tp(await p.arrayBuffer())}}async authenticate(){let e=await this.getLocalStorage(Br),n=await this.getLocalStorage(Zt),o=this.chromeRuntime.getManifest(),i=o.version,l=o.id;if(Vh(e))return{browser_id:e,user_id:n,user_agent:this.userAgent,timestamp:Jt(),device_type:"extension",version:i,extension_id:l}}async checkin(){let e=await this.getLocalStorage(Br),n=await this.getLocalStorage(go),o=await this.getLocalStorage(Zt),i=this.chromeRuntime.getManifest(),l=i.version,f=i.id,p=this.userAgent;if(!e||!n||!o){console.warn("[CHECKIN] Thi\u1EBFu BrowserID, Permissions ho\u1EB7c UserID"),await this.setLocalStorage(st,"DISCONNECTED");return}let m=Jt();if(!(m-this.lastCheckinTimestamp<=60))try{let c=await Se(`${$h}/checkin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({browserId:e,userId:o,version:l,extensionId:f,userAgent:p,deviceType:"extension"}),agent:this.proxyAgent});if(c.status===407)return;if(this.lastCheckinTimestamp=m,c.ok)return await c.json()}catch(c){if(c.message&&c.message.includes("407"))return}}async getLocalStorage(e){let n=await this.chrome.storage.local.get(e);try{return JSON.parse(n)}catch{return n}}async setLocalStorage(e,n){await this.chrome.storage.local.set(e,JSON.stringify(n))}async connect(){let e=await this.checkin();if(await this.setLocalStorage(st,"CONNECTING"),!e)return;console.log(`[CHECKIN] [${this.proxy}] OK.`);let{destinations:n,token:o}=e;n=n.map(p=>`ws://${p}`);let i=n.length-1,l=0,f=async()=>{this.websocket=new ze(`${n[l]}?token=${o}`,{agent:this.proxyAgent}),this.websocket.on("open",async()=>{console.log(`[WEBSOCKET] [${this.proxy}] connected.`),this.lastLiveConnectionTimestamp=Jt(),await this.setLocalStorage(st,"CONNECTED"),this._startSocketPing(),this._startSocketLivenessCheck()}),this.websocket.on("message",async p=>{this.lastLiveConnectionTimestamp=Jt();let m;try{m=JSON.parse(p)}catch{return}if(m.action in this.RPCTable){m.action!=="PONG"&&console.log(`[WEBSOCKET RPC] message ${m.action}`);try{let c=await this.RPCTable[m.action](m.data);this.websocket.send(JSON.stringify({id:m.id,origin_action:m.action,result:c}))}catch{}}}),this.websocket.on("close",async p=>{p.wasClean?console.log(`[WEBSOCKET] Close, code=${p.code} reason=${p.reason}`):(console.log("[WEBSOCKET] Disconnect, retry..."),clearInterval(this._pingInterval),clearInterval(this._socketCheckInterval),await Ar(Or),l++,l>i?await this.setLocalStorage(st,"DEAD"):await f())}),this.websocket.on("error",async p=>{if(!(p&&p.message&&p.message.includes("407"))){if(clearInterval(this._pingInterval),clearInterval(this._socketCheckInterval),l++,l>i){await this.setLocalStorage(st,"DEAD");return}await Ar(Or),await f()}})};await f()}_startSocketPing(){this._pingInterval&&clearInterval(this._pingInterval),this._pingInterval=setInterval(()=>{this.websocket&&this.websocket.readyState===ze.OPEN&&this.websocket.send(JSON.stringify({id:Nn(),version:"1.0.0",action:"PING",data:{}}))},jh)}_startSocketLivenessCheck(){this._socketCheckInterval&&clearInterval(this._socketCheckInterval),this._socketCheckInterval=setInterval(async()=>{let e=[ze.CONNECTING,ze.CLOSING];this.websocket&&(this.websocket.readyState===ze.OPEN?await this.setLocalStorage(st,"CONNECTED"):this.websocket.readyState===ze.CLOSED&&await this.setLocalStorage(st,"DISCONNECTED"));let n=await this.getLocalStorage(So);if(typeof n>"u"&&(await this.setLocalStorage(So,!0),n=!0),e.includes(this.websocket.readyState)||!n){console.log("[WEBSOCKET] Socket not ready for liveness check...");return}if(Jt()-this.lastLiveConnectionTimestamp>129||this.websocket.readyState===ze.CLOSED||!n||!this.websocket){console.error("[WEBSOCKET] Socket appears dead! Reconnecting...");try{this.websocket.close()}catch(l){console.error("[CHECK_INTERVAL] ",l)}await Ar(Or),this.connect()}},Uh)}_registerRuntimeListeners(){this.chromeRuntime.on("message",async(e,n,o)=>{if(e&&e.type)switch(e.type){case"ping":o&&o("pong");break;case"connect":this.connect();break;case"disconnect":try{this.websocket&&this.websocket.close()}catch(i){console.error(i)}await this.setLocalStorage(So,!1),await this.setLocalStorage(st,"DISCONNECTED"),o&&o("Disconnected...");break;case"getWebsocketReadyState":o&&o({readyState:this.websocket?this.websocket.readyState:-1});break;case"getCurrentVersion":o&&o({version:this.chromeRuntime.getManifest().version});break;default:await this.setLocalStorage(Yh,e),this.websocket&&this.websocket.readyState===ze.OPEN&&this.websocket.send(JSON.stringify({jwt:e,action:"VALIDATE_JWT"})),o&&o({success:!0});break}}),this.chromeRuntime.on("messageExternal",async(e,n,o)=>{if(e&&e.type)switch(e.type){case"setAccessToken":await this.setLocalStorage(su,e.payload);break;case"setRefreshToken":await this.setLocalStorage(ou,e.payload);break;case"getBrowserId":o(await this.getLocalStorage(Br));break;case"getUserId":o(await this.getLocalStorage(Zt));break;case"setUserId":await this.setLocalStorage(Zt,e.payload);break;case"setIsAuthenticated":await this.setLocalStorage(ru,e.payload);break;case"updateUsername":await this.setLocalStorage(iu,e.payload);break;case"clearStorage":await this.setLocalStorage(Qh,null),await this.setLocalStorage(iu,""),await this.setLocalStorage(Zh,""),await this.setLocalStorage(ru,!1),await this.setLocalStorage(Kh,null),await this.setLocalStorage(Jh,null),await this.setLocalStorage(su,""),await this.setLocalStorage(ou,""),o("Storage cleared");break;default:break}}),this.chromeRuntime.on("connect",async e=>{e&&e.name==="popup"&&(await this.setLocalStorage(nu,!0),e.onDisconnect(async()=>{await this.setLocalStorage(nu,!1)}))})}_registerStorageListeners(){this.chrome.storage.onChanged=e=>{e[Zt]&&this.getLocalStorage(Zt).then(n=>{if(n){try{this.websocket&&this.websocket.close(1e3,"User ID changed")}catch(o){console.error(o)}Ar(Or).then(()=>this.connect())}else try{this.websocket&&this.websocket.close(1e3,"Blank User ID")}catch(o){console.error(o)}}),e[go]&&this.getLocalStorage(go).then(n=>{if(n){try{this.websocket&&this.websocket.close(1e3,"Permissions changed")}catch(o){console.error(o)}Ar(Or).then(()=>this.connect())}})}}async start(){await this.updateBrowserId(),this.chromeRuntime.emit("message",{type:"connect"})}};async function cu(r={}){let e=new To(r);return await e.start(),e}function tp(r){let e="",n=new Uint8Array(r),o=n.byteLength;for(let i=0;i<o;i++)e+=String.fromCharCode(n[i]);return Buffer.from(e,"binary").toString("base64")}process.on("unhandledRejection",(r,e)=>{console.error("APP Unhandled Rejection at:",e,"reason:",r)});process.on("uncaughtException",r=>{console.error("APP Uncaught Exception thrown:",r)});var Gn=vt.default.join(process.cwd(),"data"),rp=vt.default.join(Gn,"setting.json"),Po=JSON.parse(ot.default.readFileSync(rp,"utf8")),{version:np,devicetype:sp,extension_id:op,number_of_turn:xo,time_delay:ko,proxy_path:Yn,proxy_api_key:Kn}=Po;console.table({version:np,devicetype:sp,extension_id:op,batchSize:xo,time_delay:ko,proxy_api_key:Kn,proxy_path:Yn,Create:"2movn.com"});function ip(r,e){let n=[];for(let o=0;o<r.length;o+=e)n.push(r.slice(o,o+e));return n}async function Vn(r){return new Promise(e=>setTimeout(e,r))}(async()=>{let r={username:Po.username,password:Po.password},e=await Ta(r);e||(console.error("Login Account false. Turn off app 10s"),await Vn(1e4),process.exit(1));let n=vt.default.join(Gn,"settingStorage.json"),o={};if(ot.default.existsSync(n))try{o=JSON.parse(ot.default.readFileSync(n,"utf8"))}catch(p){console.error("Error reading settingStorage.json:",p)}o["wynd:user_id"]=e.userId,o.accessToken=e.accessToken,o.refreshToken=e.refreshToken,o.email=e.email,o.username="2mo.vn",ot.default.writeFileSync(n,JSON.stringify(o,null,2));let i=[];if(Kn&&Kn.trim()!=="")try{let m=await(await Se("https://ipviet.store/orders/api/get-proxy?api_key="+Kn)).json();m.status||console.error("No Proxy with API"),i=(m.proxies||[]).map(d=>`${d.type.toLowerCase()}://${d.username}:${d.password}@${d.host}:${d.port}`)}catch(p){console.error("Error fetching proxies:",p)}else try{let p=vt.default.isAbsolute(Yn)?Yn:vt.default.join(Gn,Yn);i=ot.default.readFileSync(p,"utf8").split(`
`).map(c=>c.trim()).filter(c=>c.length>0)}catch(p){console.error("Error reading proxies from file:",p)}i.length||(console.error("Proxies not found. Turn off app 10s"),await Vn(1e4),process.exit(1));let l=await Sn(e.accessToken);typeof l=="object"&&l!==null?console.log(`Total point: ${l.totalPoints} | Total Uptime: ${l.totalUptime}`):console.log("CheckPoint error or no data:",l),console.log(`Found ${i.length} proxy(s).`);let f=ip(i,xo);for(let p=0;p<f.length;p++){let m=f[p];console.log(`Processing batch ${p+1} of ${f.length}`);for(let c=0;c<m.length;c++){let d=m[c],b=p*xo+c,S=vt.default.join(Gn,`setting_${b}.json`);ot.default.existsSync(S)||ot.default.copyFileSync(n,S),cu({proxy:d,storageFileOverride:S})}console.log(`Batch ${p+1} completed. Waiting for ${ko} ms before next batch.`),await Vn(ko)}(async function(){let m=e.accessToken,c=await Sn(m);for(typeof c=="object"&&c!==null?console.log(`(2movn Check-point) Total Uptime: ${c.totalUptime} | Total Points: ${c.totalPoints}`):console.log("(2movn) Error or no data:",c);;){await Vn(10*60*1e3);let d=await Sn(m);typeof d=="object"&&d!==null?console.log(`(2movn Check-point) Total Uptime: ${d.totalUptime} | Total Points: ${d.totalPoints}`):console.log("(2movn) Error or no data:",d)}})()})();
/*! Bundled license information:

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
